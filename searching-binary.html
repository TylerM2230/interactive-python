<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Learn Searching & Binary Search</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      /* Custom styles (consistent with previous tutorials) */
      body {
        font-family: "Inter", sans-serif;
      }
      pre {
        background-color: #f3f4f6; /* gray-100 */
        border: 1px solid #e5e7eb; /* gray-200 */
        border-radius: 0.375rem; /* rounded-md */
        padding: 1rem; /* p-4 */
        overflow-x: auto;
        font-family: monospace;
        font-size: 0.875rem; /* text-sm */
        margin-top: 0.5rem; /* mt-2 */
        margin-bottom: 1rem; /* mb-4 */
        position: relative;
      }
      code {
        font-family: monospace;
        background-color: rgba(209, 213, 219, 0.3); /* gray-300 with opacity */
        padding: 0.1rem 0.3rem;
        border-radius: 0.25rem;
      }
      pre code {
        /* Don't style code inside pre differently */
        background-color: transparent;
        padding: 0;
        border-radius: 0;
      }
      .interactive-section {
        background-color: #ffffff; /* white */
        padding: 1.5rem; /* p-6 */
        border-radius: 0.5rem; /* rounded-lg */
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1),
          0 1px 2px 0 rgba(0, 0, 0, 0.06); /* shadow-md */
        margin-bottom: 1.5rem; /* mb-6 */
      }
      .btn {
        background-color: #3b82f6; /* blue-500 */
        color: white;
        padding: 0.5rem 1rem; /* py-2 px-4 */
        border-radius: 0.375rem; /* rounded-md */
        font-weight: 500; /* font-medium */
        cursor: pointer;
        transition: background-color 0.2s ease;
        border: none;
        margin-right: 0.5rem; /* mr-2 */
        margin-top: 0.5rem; /* Add some top margin for buttons */
      }
      .btn:hover:not(:disabled) {
        background-color: #2563eb; /* blue-600 */
      }
      .btn:disabled {
        background-color: #9ca3af; /* gray-400 */
        cursor: not-allowed;
      }
      .btn-green {
        background-color: #22c55e; /* green-500 */
      }
      .btn-green:hover:not(:disabled) {
        background-color: #16a34a; /* green-600 */
      }
      .btn-orange {
        background-color: #f97316; /* orange-500 */
      }
      .btn-orange:hover:not(:disabled) {
        background-color: #ea580c; /* orange-600 */
      }
      .input-field,
      .select-field {
        border: 1px solid #d1d5db; /* gray-300 */
        padding: 0.5rem; /* p-2 */
        border-radius: 0.375rem; /* rounded-md */
        margin-right: 0.5rem; /* mr-2 */
        margin-top: 0.25rem; /* mt-1 */
        margin-bottom: 0.5rem; /* mb-2 */
      }
      .message-box {
        margin-top: 1rem; /* mt-4 */
        padding: 0.75rem; /* p-3 */
        border-radius: 0.375rem; /* rounded-md */
        font-size: 0.875rem; /* text-sm */
      }
      .message-box-success {
        background-color: #dcfce7; /* green-100 */
        color: #166534; /* green-800 */
        border: 1px solid #86efac; /* green-300 */
      }
      .message-box-error {
        background-color: #fee2e2; /* red-100 */
        color: #991b1b; /* red-800 */
        border: 1px solid #fecaca; /* red-300 */
      }
      .message-box-info {
        background-color: #e0f2fe; /* sky-100 */
        color: #075985; /* sky-800 */
        border: 1px solid #bae6fd; /* sky-300 */
      }
      .output-display {
        background-color: #f9fafb; /* gray-50 */
        border: 1px dashed #d1d5db; /* gray-300 */
        padding: 1rem; /* p-4 */
        border-radius: 0.375rem; /* rounded-md */
        min-height: 80px;
        font-family: monospace;
        white-space: pre-wrap; /* Keep formatting */
        margin-top: 0.5rem; /* mt-2 */
        max-height: 350px;
        overflow-y: auto;
      }
      /* Search Visualization Styles */
      .search-container {
        background-color: #f3f4f6; /* gray-100 */
        padding: 1rem;
        border-radius: 0.375rem;
        margin-top: 1rem;
        min-height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 4px; /* Space between items */
        border: 1px solid #e5e7eb; /* gray-200 */
        flex-wrap: wrap;
      }
      .search-item {
        border: 1px solid #9ca3af; /* gray-400 */
        background-color: #fff; /* white */
        color: #374151; /* gray-700 */
        padding: 0.5rem 0.8rem;
        margin: 2px;
        border-radius: 4px;
        font-family: monospace;
        min-width: 35px;
        text-align: center;
        transition: background-color 0.3s ease, border-color 0.3s ease,
          transform 0.2s ease, opacity 0.3s ease;
        position: relative; /* For index labels */
      }
      .search-item::before {
        /* Show index below */
        content: attr(data-index);
        position: absolute;
        bottom: -1.2em;
        left: 0;
        right: 0;
        text-align: center;
        font-size: 0.7rem;
        color: #6b7280; /* gray-500 */
      }
      .search-item.active-range {
        border-color: #60a5fa; /* blue-400 */
        /* background-color: #eff6ff; blue-50 */
      }
      .search-item.mid {
        background-color: #fcd34d; /* amber-300 */
        border-color: #f59e0b; /* amber-500 */
        transform: scale(1.1);
        font-weight: bold;
        z-index: 10;
      }
      .search-item.found {
        background-color: #34d399; /* emerald-400 */
        border-color: #059669; /* emerald-600 */
        color: white;
        transform: scale(1.15);
        font-weight: bold;
        z-index: 10;
      }
      .search-item.discarded {
        opacity: 0.3;
        background-color: #e5e7eb; /* gray-200 */
        border-color: #d1d5db; /* gray-300 */
      }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-800 p-4 md:p-8">
    <header class="text-center mb-8">
      <h1 class="text-3xl md:text-4xl font-bold text-blue-600">
        Understanding Searching & Binary Search
      </h1>
      <p class="text-lg text-gray-600 mt-2">
        An Interactive Guide (using Python examples)
      </p>
    </header>

    <nav
      class="max-w-4xl mx-auto mb-6 p-3 bg-white rounded-lg shadow-md flex justify-between items-center"
    >
      <a
        href="sorting-merge-joke.html"
        class="text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200"
      >
        &larr; Previous Tutorial: Sorting & Joke Algorithms
      </a>
      <a
        href="oop-basics.html"
        class="text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200"
      >
        Next Tutorial: OOP (Basics) &rarr;
      </a>
    </nav>

    <main class="max-w-4xl mx-auto">
      <section class="mb-8">
        <h2 class="text-2xl font-semibold text-gray-700 mb-3">
          1. What is Searching?
        </h2>
        <p class="mb-4">
          Searching is the process of finding a specific item (the "target")
          within a collection of items (like a list, array, or database). It's a
          fundamental operation used constantly in computing – finding a file,
          looking up a contact, checking if a username exists, etc.
        </p>
        <p class="mb-2">The simplest search method is **Linear Search**:</p>
        <ul class="list-disc list-inside ml-4 space-y-1">
          <li>Start at the beginning of the collection.</li>
          <li>Compare each item one by one with the target value.</li>
          <li>
            If a match is found, return the item's position (or indicate
            success).
          </li>
          <li>
            If the end of the collection is reached without finding the target,
            indicate failure.
          </li>
        </ul>
        <p class="mt-2">
          Linear search works on any list, sorted or unsorted, but it can be
          slow for large collections because, in the worst case, you might have
          to check every single item (O(n) time complexity).
        </p>
      </section>

      <section class="mb-8">
        <h2 class="text-2xl font-semibold text-gray-700 mb-3">
          2. Binary Search: Efficient Searching
        </h2>
        <p class="mb-2">
          Binary Search is a much faster searching algorithm, but it has one
          crucial requirement: **the collection must be sorted.**
        </p>
        <p class="mb-2">It works using a **Divide and Conquer** strategy:</p>
        <ol class="list-decimal list-inside ml-4 space-y-1 text-sm">
          <li>Start with the entire sorted list as the search range.</li>
          <li>Find the middle element of the current search range.</li>
          <li>
            Compare the middle element with the target value:
            <ul>
              <li>
                If they match, you've found the item! Return its position.
              </li>
              <li>
                If the target is *less than* the middle element, discard the
                right half of the search range (including the middle element).
                The target can only be in the left half.
              </li>
              <li>
                If the target is *greater than* the middle element, discard the
                left half of the search range (including the middle element).
                The target can only be in the right half.
              </li>
            </ul>
          </li>
          <li>
            Repeat steps 2 and 3 with the new, smaller search range until the
            item is found or the search range becomes empty (meaning the item is
            not in the list).
          </li>
        </ol>
        <p class="mt-2 text-sm text-gray-600">
          Because Binary Search eliminates half of the remaining search space
          with each comparison, it's significantly faster than linear search for
          large lists (O(log n) time complexity).
        </p>
      </section>

      <section class="mb-8 interactive-section">
        <h2 class="text-2xl font-semibold text-gray-700 mb-3">
          3. Visualize Binary Search
        </h2>
        <p class="mb-4">
          Search for a number in the sorted list below using Binary Search.
          Observe how the search range narrows down with each step.
        </p>
        <h3 class="text-lg font-medium mb-2">Sorted List:</h3>
        <div id="searchContainer" class="search-container mb-4"></div>
        <div class="flex flex-wrap items-center mb-2">
          <label for="targetInput" class="mr-2">Target Value to Find:</label>
          <input
            type="number"
            id="targetInput"
            class="input-field"
            placeholder="e.g., 45"
            value="45"
          />
          <button id="runBinarySearchButton" class="btn btn-green">
            Run Binary Search
          </button>
          <button id="resetSearchButton" class="btn btn-orange">Reset</button>
          <label for="searchSpeedRange" class="ml-4 mr-1 text-sm">Speed:</label>
          <input
            type="range"
            id="searchSpeedRange"
            min="200"
            max="2000"
            value="1000"
            step="100"
            class="align-middle"
          />
        </div>

        <h4 class="text-md font-medium mt-3 mb-1">Search Log:</h4>
        <div id="searchLogDisplay" class="output-display">
          <span class="text-gray-500 italic"
            >Enter a target value and click 'Run Binary Search'.</span
          >
        </div>
        <div id="searchMessage" class="message-box" style="display: none"></div>
      </section>

      <section class="mb-8">
        <h2 class="text-2xl font-semibold text-gray-700 mb-3">
          4. Python Implementation (Iterative)
        </h2>
        <p class="mb-2">
          Here's a common iterative implementation of Binary Search in Python:
        </p>
        <pre><code class="language-python">def binary_search(data_list, target):
  """
  Performs binary search on a sorted list.

  Args:
    data_list: A sorted list of items.
    target: The item to search for.

  Returns:
    The index of the target if found, otherwise -1.
  """
  low = 0
  high = len(data_list) - 1

  while low <= high:
    mid = (low + high) // 2 # Calculate middle index (integer division)

    if data_list[mid] == target:
      return mid # Target found!
    elif target < data_list[mid]:
      high = mid - 1 # Target is in the left half
    else: # target > data_list[mid]
      low = mid + 1 # Target is in the right half

  return -1 # Target not found in the list

# Example usage:
my_sorted_list = [10, 20, 30, 40, 50, 60, 70]
target_value = 30
index = binary_search(my_sorted_list, target_value)

if index != -1:
  print(f"Target {target_value} found at index: {index}")
else:
  print(f"Target {target_value} not found.")</code></pre>
      </section>

      <section class="mb-8 interactive-section">
        <h2 class="text-2xl font-semibold text-gray-700 mb-3">5. Quick Quiz</h2>
        <p class="mb-4">Test your understanding!</p>
        <div class="mb-3">
          <p class="font-medium mb-1">
            Q1: What is the main requirement for using Binary Search?
          </p>
          <label class="block"
            ><input type="radio" name="q1_search" value="a" class="mr-1" /> The
            list must contain only numbers</label
          >
          <label class="block"
            ><input type="radio" name="q1_search" value="b" class="mr-1" /> The
            list must be sorted</label
          >
          <label class="block"
            ><input type="radio" name="q1_search" value="c" class="mr-1" /> The
            list must be small</label
          >
        </div>
        <div class="mb-3">
          <p class="font-medium mb-1">
            Q2: How does Binary Search narrow down the search space?
          </p>
          <label class="block"
            ><input type="radio" name="q2_search" value="a" class="mr-1" /> By
            checking elements one by one</label
          >
          <label class="block"
            ><input type="radio" name="q2_search" value="b" class="mr-1" /> By
            eliminating half of the remaining elements in each step</label
          >
          <label class="block"
            ><input type="radio" name="q2_search" value="c" class="mr-1" /> By
            randomly picking elements</label
          >
        </div>
        <div class="mb-3">
          <p class="font-medium mb-1">
            Q3: If the target value is *greater* than the middle element during
            Binary Search, which part of the list is searched next?
          </p>
          <label class="block"
            ><input type="radio" name="q3_search" value="a" class="mr-1" /> The
            left half</label
          >
          <label class="block"
            ><input type="radio" name="q3_search" value="b" class="mr-1" /> The
            right half</label
          >
          <label class="block"
            ><input type="radio" name="q3_search" value="c" class="mr-1" /> The
            entire list is checked again</label
          >
        </div>
        <div class="mb-3">
          <p class="font-medium mb-1">
            Q4: What is the time complexity of Binary Search on a sorted list?
          </p>
          <label class="block"
            ><input type="radio" name="q4_search" value="a" class="mr-1" />
            O(n)</label
          >
          <label class="block"
            ><input type="radio" name="q4_search" value="b" class="mr-1" />
            O(n²)</label
          >
          <label class="block"
            ><input type="radio" name="q4_search" value="c" class="mr-1" />
            O(log n)</label
          >
        </div>
        <button id="checkQuizButtonSearch" class="btn">Check Answers</button>
        <div
          id="quizResultSearch"
          class="message-box mt-4"
          style="display: none"
        ></div>
      </section>
    </main>

    <footer class="text-center mt-12 text-gray-500 text-sm">
      <p>Happy Learning!</p>
    </footer>

    <script>
      // --- Shared Utility Functions ---
      function showMessage(element, message, type = "info") {
        element.textContent = message;
        element.className = `message-box message-box-${type}`;
        element.style.display = "block";
        setTimeout(() => {
          element.style.display = "none";
        }, 3000);
      }

      // --- DOM Elements & State ---
      const searchContainer = document.getElementById("searchContainer");
      const targetInput = document.getElementById("targetInput");
      const runBinarySearchButton = document.getElementById(
        "runBinarySearchButton"
      );
      const resetSearchButton = document.getElementById("resetSearchButton");
      const searchLogDisplay = document.getElementById("searchLogDisplay");
      const searchMessage = document.getElementById("searchMessage");
      const searchSpeedRange = document.getElementById("searchSpeedRange");

      const checkQuizButtonSearch = document.getElementById(
        "checkQuizButtonSearch"
      );
      const quizResultSearch = document.getElementById("quizResultSearch");

      const sortedList = [10, 18, 25, 35, 45, 55, 60, 72, 80, 88, 95, 100];
      let searchTimeout = null;

      // --- Visualization Functions ---
      function renderSearchList(container, array) {
        container.innerHTML = ""; // Clear previous
        array.forEach((value, index) => {
          const itemDiv = document.createElement("div");
          itemDiv.className = "search-item";
          itemDiv.textContent = value;
          itemDiv.dataset.index = index;
          itemDiv.dataset.value = value;
          container.appendChild(itemDiv);
        });
        // Add extra margin-bottom to container to make space for indices
        container.style.marginBottom = "2em";
      }

      function highlightSearchState(
        low,
        high,
        mid = -1,
        foundIndex = -1,
        notFound = false
      ) {
        const items = searchContainer.querySelectorAll(".search-item");
        items.forEach((item, index) => {
          item.classList.remove("active-range", "mid", "found", "discarded"); // Clear previous state

          if (notFound) {
            item.classList.add("discarded"); // Mark all as discarded if not found
          } else if (foundIndex === index) {
            item.classList.add("found");
          } else if (index >= low && index <= high) {
            item.classList.add("active-range");
            if (index === mid) {
              item.classList.add("mid");
            }
          } else {
            item.classList.add("discarded");
          }
        });
      }

      // --- Binary Search Simulation ---
      async function simulateBinarySearch() {
        runBinarySearchButton.disabled = true;
        resetSearchButton.disabled = true;
        searchLogDisplay.innerHTML = ""; // Clear log
        searchMessage.style.display = "none";

        const targetStr = targetInput.value;
        if (targetStr === "") {
          showMessage(searchMessage, "Please enter a target value.", "error");
          runBinarySearchButton.disabled = false;
          resetSearchButton.disabled = false;
          return;
        }
        const target = parseInt(targetStr, 10);
        if (isNaN(target)) {
          showMessage(
            searchMessage,
            "Invalid target value. Please enter a number.",
            "error"
          );
          runBinarySearchButton.disabled = false;
          resetSearchButton.disabled = false;
          return;
        }

        let low = 0;
        let high = sortedList.length - 1;
        let found = false;
        let foundIdx = -1;
        const speed = () => 2100 - parseInt(searchSpeedRange.value, 10); // Speed control

        const log = (message) => {
          searchLogDisplay.innerHTML += message + "\n";
          searchLogDisplay.scrollTop = searchLogDisplay.scrollHeight;
        };

        log(`Starting Binary Search for target: ${target}`);
        log(`Initial range: low=${low}, high=${high}`);
        highlightSearchState(low, high);
        await new Promise((resolve) => setTimeout(resolve, speed()));

        while (low <= high) {
          let mid = Math.floor((low + high) / 2);
          let midValue = sortedList[mid];

          log(`\nChecking middle index: ${mid} (value: ${midValue})`);
          highlightSearchState(low, high, mid); // Highlight mid
          await new Promise((resolve) => setTimeout(resolve, speed()));

          if (midValue === target) {
            log(`Target ${target} FOUND at index ${mid}!`);
            highlightSearchState(low, high, mid, mid); // Highlight found
            found = true;
            foundIdx = mid;
            break; // Exit loop
          } else if (target < midValue) {
            log(`Target ${target} < ${midValue}. Discarding right half.`);
            high = mid - 1;
            log(`New range: low=${low}, high=${high}`);
            highlightSearchState(low, high); // Highlight new range (discarding right)
            await new Promise((resolve) => setTimeout(resolve, speed()));
          } else {
            // target > midValue
            log(`Target ${target} > ${midValue}. Discarding left half.`);
            low = mid + 1;
            log(`New range: low=${low}, high=${high}`);
            highlightSearchState(low, high); // Highlight new range (discarding left)
            await new Promise((resolve) => setTimeout(resolve, speed()));
          }
        }

        if (!found) {
          log(`\nTarget ${target} NOT FOUND in the list.`);
          highlightSearchState(low, high, -1, -1, true); // Mark all as discarded
          showMessage(searchMessage, `Target ${target} not found.`, "error");
        } else {
          showMessage(
            searchMessage,
            `Target ${target} found at index ${foundIdx}.`,
            "success"
          );
        }

        runBinarySearchButton.disabled = false;
        resetSearchButton.disabled = false;
      }

      // --- Reset Function ---
      function resetSearch() {
        // Could potentially stop ongoing simulation if needed (more complex)
        targetInput.value = "45"; // Reset input
        renderSearchList(searchContainer, sortedList); // Re-render initial list state
        searchLogDisplay.innerHTML =
          "<span class=\"text-gray-500 italic\">Enter a target value and click 'Run Binary Search'.</span>";
        searchMessage.style.display = "none";
        runBinarySearchButton.disabled = false;
        resetSearchButton.disabled = false;
      }

      // --- Quiz Logic ---
      function checkSearchQuiz() {
        const answers = {
          q1_search: "b", // List must be sorted
          q2_search: "b", // Eliminating half
          q3_search: "b", // Right half
          q4_search: "c", // O(log n)
        };
        let score = 0;
        let resultsHTML = "<ul>";
        let allAnswered = true;

        for (const q in answers) {
          const selected = document.querySelector(`input[name="${q}"]:checked`);
          if (!selected) {
            allAnswered = false;
            break;
          }
          const isCorrect = selected.value === answers[q];
          if (isCorrect) {
            score++;
            resultsHTML += `<li class="text-green-700">✓ Question ${q.substring(
              1,
              2
            )}: Correct!</li>`;
          } else {
            resultsHTML += `<li class="text-red-700">✗ Question ${q.substring(
              1,
              2
            )}: Incorrect.</li>`;
          }
        }

        if (!allAnswered) {
          quizResultSearch.textContent =
            "Please answer all questions before checking.";
          quizResultSearch.className = "message-box message-box-error";
          quizResultSearch.style.display = "block";
          return;
        }

        resultsHTML += "</ul>";
        resultsHTML =
          `<p class="font-medium mb-2">You scored ${score} out of ${
            Object.keys(answers).length
          }.</p>` + resultsHTML;

        quizResultSearch.innerHTML = resultsHTML;
        quizResultSearch.className =
          score === Object.keys(answers).length
            ? "message-box message-box-success"
            : "message-box message-box-error";
        quizResultSearch.style.display = "block";
      }

      // --- Event Listeners ---
      runBinarySearchButton.addEventListener("click", simulateBinarySearch);
      resetSearchButton.addEventListener("click", resetSearch);
      checkQuizButtonSearch.addEventListener("click", checkSearchQuiz);

      // --- Initial Setup ---
      window.onload = () => {
        renderSearchList(searchContainer, sortedList);
      };
    </script>
  </body>
</html>
