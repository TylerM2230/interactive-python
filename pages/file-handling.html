<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>File Handling - Python Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/shared-styles.css">
  </head>
  <body class="min-h-screen">
    <div class="console-screen-border">
      <nav class="navbar-8bit mb-6">
        <a href="error-handling.html" class="btn-8bit">&larr; Error Handling</a>
        <a href="../index.html" class="btn-8bit">Main Menu</a>
        <a href="random-module.html" class="btn-8bit">Random Module &rarr;</a>
      </nav>

      <div class="content-wrapper-8bit">
        <h1 class="page-title-8bit mb-6">
          File Handling in Python
        </h1>

        <section class="interactive-section mb-6">
          <h2 class="text-xl font-semibold mb-3">
            1. Why File Handling?
          </h2>
          <p class="mb-4">
            Think of file handling like a library system. Just as a library stores books that can be read and written to, programs need to store and retrieve data from files. Whether it's saving your game progress, reading configuration settings, or logging important events, file handling is like having a permanent memory for your program.
          </p>
          <p class="text-sm p-3 rounded-md message-box message-box-warning">
            <strong>Note:</strong> Interactive examples here *simulate* file operations for security. Web browsers can't directly access local files this way. The Python code shown works with real files in a Python environment.
          </p>
        </section>

        <section class="interactive-section mb-6">
          <h2 class="text-xl font-semibold mb-3">
            2. Opening Files & Modes
          </h2>
          <p class="mb-2">
            Opening a file is like choosing how to interact with a book in a library. The mode you choose determines what you can do:
          </p>
          <ul class="list-disc list-inside ml-4 space-y-1">
            <li><code>'r'</code>: Like checking out a book to read - you can only read it, and it must exist.</li>
            <li><code>'w'</code>: Like getting a blank notebook - you can write anything, but it erases any existing content.</li>
            <li><code>'a'</code>: Like adding to your diary - you can write at the end without affecting what's already there.</li>
            <li><code>'r+'</code>: Like having a notebook with both reading and writing permissions.</li>
            <li>Binary modes (<code>'b'</code>): Like handling special books that aren't just text (images, music, etc.).</li>
          </ul>
        </section>
        
        <section class="interactive-section mb-6">
          <h2 class="text-xl font-semibold mb-3">
            3. Reading from Files
          </h2>
          <p class="mb-2">
            Reading from files is like different ways of reading a book:
          </p>
          <ul class="list-disc list-inside ml-4 space-y-1">
            <li><code>.read()</code>: Like reading the entire book at once.</li>
            <li><code>.readline()</code>: Like reading one page at a time.</li>
            <li><code>.readlines()</code>: Like making a list of all pages to read later.</li>
            <li><code>for line in file_object:</code>: Like reading the book page by page, efficiently.</li>
          </ul>
          <pre><code class="language-python"># Assuming 'scroll.txt' contains:
# Ancient wisdom...
# More secrets...

with open('scroll.txt', 'r') as f:
  for line in f:
    print(line.strip()) # strip() removes newline</code></pre>
        </section>

        <section class="interactive-section mb-6">
          <h2 class="text-xl font-semibold mb-3">
            4. Writing and Appending to Files
          </h2>
          <p class="mb-2">
            Writing to files is like different ways of writing in a notebook:
          </p>
          <ul class="list-disc list-inside ml-4 space-y-1">
            <li><code>.write(string)</code>: Like writing a single sentence - you need to add your own line breaks.</li>
            <li><code>.writelines(list_of_strings)</code>: Like writing multiple sentences at once from a list.</li>
          </ul>
          <pre><code class="language-python"># 'w' mode overwrites or creates
with open('logbook.txt', 'w') as f:
  f.write("Chapter 1: The Quest Begins\n")

# 'a' mode appends or creates
with open('logbook.txt', 'a') as f:
  f.write("Chapter 2: The Forest Path\n")</code></pre>
        </section>

        <section class="interactive-section mb-6">
          <h2 class="text-xl font-semibold mb-3">
            5. The <code>with</code> Statement (Best Practice)
          </h2>
          <p class="mb-2">
            The <code>with</code> statement is like having a responsible librarian. When you're done with a book, the librarian automatically puts it back on the shelf. Similarly, <code>with</code> automatically closes your file when you're done, even if something goes wrong.
          </p>
          <pre><code class="language-python">with open('treasure_map.txt', 'r') as map_file:
  instructions = map_file.read()
  # map_file is automatically closed after this block
print("Map read and closed!")</code></pre>
        </section>

        <section class="interactive-section mb-6">
          <h2 class="text-xl font-semibold mb-3">
            Interactive File Simulation
          </h2>
          <p class="mb-4">
            Let's practice file handling with a magical adventure! You'll be working with an ancient scroll and a logbook, just like a wizard managing their spell books and research notes.
          </p>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Read Simulation -->
            <div>
              <h3 class="text-lg font-semibold mb-2">Read from Virtual Scroll</h3>
              <div class="sub-interactive-box mb-4">
                <label class="block mb-1 font-semibold">Virtual Scroll Content ('virtual_scroll.txt'):</label>
                <textarea id="readFileContent" class="input-field w-full h-24 font-mono text-sm p-2" readonly>The ancient runes whisper of a hidden treasure.
Follow the path marked by the three great oaks.
Beware the sleeping guardian of the Forest Glade.</textarea>
              </div>
              <button id="simulateReadButton" class="btn btn-8bit">Read Entire Scroll</button>
              <button id="simulateReadLineButton" class="btn btn-8bit">Read Next Line</button>
              <div id="readOutput" class="output-display min-h-[50px] mt-2"></div>
            </div>

            <!-- Write/Append Simulation -->
            <div>
              <h3 class="text-lg font-semibold mb-2">Write to Virtual Logbook</h3>
              <div class="sub-interactive-box mb-4">
                <label class="block mb-1 font-semibold">Content to Write/Append:</label>
                <input type="text" id="writeFileContentInput" class="input-field w-full mb-2" value="Encountered a friendly sprite.">
                <label class="block mb-1 font-semibold">Current Logbook ('virtual_logbook.txt'):</label>
                <textarea id="logbookDisplay" class="input-field w-full h-24 font-mono text-sm p-2" readonly></textarea>
              </div>
              <button id="simulateWriteButton" class="btn btn-8bit">Write (Overwrite)</button>
              <button id="simulateAppendButton" class="btn btn-8bit">Append to Logbook</button>
               <button id="clearLogbookButton" class="btn btn-8bit btn-8bit-alt">Clear Logbook</button>
            </div>
          </div>
          <div id="fileOpMessage" class="message-box mt-3" style="display:none;"></div>
        </section>

      </div> <!-- End of content-wrapper-8bit -->
    </div> <!-- End of console-screen-border -->

    <script>
      const readFileContentEl = document.getElementById('readFileContent');
      const readOutputEl = document.getElementById('readOutput');
      const simulateReadButton = document.getElementById('simulateReadButton');
      const simulateReadLineButton = document.getElementById('simulateReadLineButton');
      
      const writeFileContentInputEl = document.getElementById('writeFileContentInput');
      const logbookDisplayEl = document.getElementById('logbookDisplay');
      const simulateWriteButton = document.getElementById('simulateWriteButton');
      const simulateAppendButton = document.getElementById('simulateAppendButton');
      const clearLogbookButton = document.getElementById('clearLogbookButton');

      const messageBox = document.getElementById('fileOpMessage');
      let currentReadLineIndex = 0;

      function showFileMessage(msg, type = 'info') {
        messageBox.textContent = msg;
        messageBox.className = `message-box message-box-${type}`;
        messageBox.style.display = 'block';
        setTimeout(() => { messageBox.style.display = 'none'; }, 2500);
      }

      // Read Simulation
      simulateReadButton.addEventListener('click', () => {
        readOutputEl.textContent = readFileContentEl.value;
        currentReadLineIndex = 0; // Reset for readline
        showFileMessage('Virtual scroll content read.', 'success');
      });

      simulateReadLineButton.addEventListener('click', () => {
        const lines = readFileContentEl.value.split('\n');
        if (currentReadLineIndex < lines.length) {
          readOutputEl.textContent = lines[currentReadLineIndex];
          currentReadLineIndex++;
          showFileMessage('Next line from virtual scroll read.', 'info');
        } else {
          readOutputEl.textContent = '(End of Scroll)';
          showFileMessage('Reached the end of the virtual scroll.', 'warning');
        }
      });

      // Write/Append Simulation
      simulateWriteButton.addEventListener('click', () => {
        const contentToWrite = writeFileContentInputEl.value;
        logbookDisplayEl.value = contentToWrite + "\n"; 
        showFileMessage('Virtual logbook overwritten.', 'success');
      });

      simulateAppendButton.addEventListener('click', () => {
        const contentToAppend = writeFileContentInputEl.value;
        logbookDisplayEl.value += contentToAppend + "\n";
        showFileMessage('Content appended to virtual logbook.', 'info');
      });
      
      clearLogbookButton.addEventListener('click', () => {
          logbookDisplayEl.value = '';
          showFileMessage('Virtual logbook cleared.', 'info');
      });

    </script>
  </body>
</html>
