<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Basic Sorting Algorithms | Interactive Python Guide</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/shared-styles.css">
  </head>
  <body class="page-layout">
    <div class="page-console-border">
      <div class="lesson-hero">
        <div class="lesson-hero-content">
          <h1 class="lesson-title">
            <a href="../index.html" style="color: inherit; text-decoration: none;">Interactive Guide to Python</a>
          </h1>
          <h2 class="lesson-subtitle">Basic Sorting Algorithms</h2>
          <p class="lesson-subtitle">
            Organizing Data ‚Ä¢ Performance Analysis ‚Ä¢ Algorithmic Thinking
          </p>
        </div>
      </div>

      <nav class="page-navigation">
        <div class="nav-content">
          <a href="graphs.html" class="nav-btn">‚Üê Graphs</a>
          <a href="../index.html" class="nav-btn">üè† Home</a>
          <a href="sorting-merge-joke.html" class="nav-btn">Advanced Sorting ‚Üí</a>
        </div>
      </nav>

      <main class="page-content-wrapper">
        
        <div class="mental-model-box">
          <h3 style="color: #4ade80; margin-bottom: 0.5rem; font-size: 16px;">üß† Mental Model: Organizing Playing Cards</h3>
          <div style="color: #d1fae5; font-size: 13px; line-height: 1.6;">
            <p><strong>Think of sorting like organizing a deck of cards:</strong></p>
            <ul style="margin-left: 1rem;">
              <li><strong>üëÄ Compare</strong> - Look at two cards to see which is higher/lower</li>
              <li><strong>üîÑ Swap</strong> - Move cards to put them in correct order</li>
              <li><strong>üéØ Strategy</strong> - Different approaches (bubble up vs find minimum)</li>
              <li><strong>‚è±Ô∏è Efficiency</strong> - Some methods are faster than others</li>
            </ul>
          </div>
        </div>

        <section class="concept-section">
          <h2 style="color: #facc15; margin-bottom: 1rem; font-size: 20px;">Step 1: Why Do We Need Sorting?</h2>
          
          <p style="font-size: 14px; line-height: 1.6; margin-bottom: 1rem;">
            Sorting is fundamental to computer science - it enables efficient searching, makes data human-readable, and is the foundation for many other algorithms.
          </p>

          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem;">
            <div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1rem; border-radius: 0 8px 8px 0;">
              <h4 style="color: #93c5fd; margin-bottom: 0.5rem;">üîç Search Efficiency</h4>
              <p style="font-size: 13px; line-height: 1.6;">Sorted data enables fast binary search (O(log n) vs O(n))</p>
            </div>
            <div style="background: rgba(34, 197, 94, 0.1); border-left: 4px solid #22c55e; padding: 1rem; border-radius: 0 8px 8px 0;">
              <h4 style="color: #86efac; margin-bottom: 0.5rem;">üìä Data Analysis</h4>
              <p style="font-size: 13px; line-height: 1.6;">Rankings, top-K problems, statistical analysis</p>
            </div>
            <div style="background: rgba(168, 85, 247, 0.1); border-left: 4px solid #a855f7; padding: 1rem; border-radius: 0 8px 8px 0;">
              <h4 style="color: #c084fc; margin-bottom: 0.5rem;">üóÑÔ∏è Database Operations</h4>
              <p style="font-size: 13px; line-height: 1.6;">Indexing, query optimization, joins</p>
            </div>
            <div style="background: rgba(245, 158, 11, 0.1); border-left: 4px solid #f59e0b; padding: 1rem; border-radius: 0 8px 8px 0;">
              <h4 style="color: #fbbf24; margin-bottom: 0.5rem;">üëÅÔ∏è Human Readability</h4>
              <p style="font-size: 13px; line-height: 1.6;">Making data easier to understand and navigate</p>
            </div>
          </div>
        </section>

        <section class="concept-section">
          <h2 style="color: #facc15; margin-bottom: 1rem; font-size: 20px;">Step 2: Bubble Sort - Bubbling to the Top</h2>
          
          <p style="font-size: 14px; line-height: 1.6; margin-bottom: 1rem;">
            Like bubbles rising to the surface, larger elements "bubble up" to their correct positions through repeated comparisons with adjacent elements.
          </p>

          <div class="interactive-repl">
            <h4 style="color: #facc15; margin-bottom: 0.5rem; font-size: 14px;">ü´ß The Bubble Sort Strategy</h4>
            <pre style="background: #1f2937; padding: 0.75rem; border-radius: 6px; font-size: 12px; color: #e5e7eb;"><code>def bubble_sort(arr):
    n = len(arr)
    # Traverse through all array elements
    for i in range(n):
        # Flag to optimize - stop if no swaps made
        swapped = False
        
        # Last i elements are already in place
        for j in range(0, n - i - 1):
            # Compare adjacent elements
            if arr[j] > arr[j + 1]:
                # Swap if they're in wrong order
                arr[j], arr[j + 1] = arr[j + 1], arr[j]
                swapped = True
        
        # If no swapping occurred, array is sorted
        if not swapped:
            break
    
    return arr</code></pre>
          </div>

          <div class="interactive-repl">
            <h4 style="color: #facc15; margin-bottom: 0.5rem; font-size: 14px;">üéÆ Interactive Bubble Sort</h4>
            <div style="display: flex; gap: 1rem; align-items: center; margin-bottom: 1rem; flex-wrap: wrap;">
              <button onclick="runBubbleSort()" class="btn">Run Bubble Sort</button>
              <button onclick="resetBubbleSort()" class="btn btn-secondary">Reset</button>
              <div>
                <label style="color: #facc15; font-size: 12px; margin-right: 0.5rem;">Speed:</label>
                <input type="range" id="bubbleSpeed" min="50" max="1000" value="300" step="50" style="width: 100px;">
              </div>
            </div>
            
            <div id="bubbleSortContainer" class="sort-container"></div>
            <div id="bubbleSortLog" style="background: #1f2937; padding: 0.75rem; border-radius: 6px; max-height: 150px; overflow-y: auto; font-size: 12px; color: #e5e7eb;">
              <em>Click 'Run Bubble Sort' to start visualization</em>
            </div>
          </div>
        </section>

        <section class="concept-section">
          <h2 style="color: #facc15; margin-bottom: 1rem; font-size: 20px;">Step 3: Selection Sort - Finding the Minimum</h2>
          
          <p style="font-size: 14px; line-height: 1.6; margin-bottom: 1rem;">
            Like repeatedly finding the smallest card and placing it at the beginning, selection sort finds the minimum element and swaps it to the correct position.
          </p>

          <div class="interactive-repl">
            <h4 style="color: #facc15; margin-bottom: 0.5rem; font-size: 14px;">üéØ The Selection Sort Strategy</h4>
            <pre style="background: #1f2937; padding: 0.75rem; border-radius: 6px; font-size: 12px; color: #e5e7eb;"><code>def selection_sort(arr):
    n = len(arr)
    
    # Traverse through all array elements
    for i in range(n):
        # Find the minimum element in remaining unsorted array
        min_idx = i
        for j in range(i + 1, n):
            if arr[j] < arr[min_idx]:
                min_idx = j
        
        # Swap the found minimum element with the first element
        arr[i], arr[min_idx] = arr[min_idx], arr[i]
    
    return arr</code></pre>
          </div>

          <div class="interactive-repl">
            <h4 style="color: #facc15; margin-bottom: 0.5rem; font-size: 14px;">üéÆ Interactive Selection Sort</h4>
            <div style="display: flex; gap: 1rem; align-items: center; margin-bottom: 1rem; flex-wrap: wrap;">
              <button onclick="runSelectionSort()" class="btn">Run Selection Sort</button>
              <button onclick="resetSelectionSort()" class="btn btn-secondary">Reset</button>
              <div>
                <label style="color: #facc15; font-size: 12px; margin-right: 0.5rem;">Speed:</label>
                <input type="range" id="selectionSpeed" min="50" max="1000" value="400" step="50" style="width: 100px;">
              </div>
            </div>
            
            <div id="selectionSortContainer" class="sort-container"></div>
            <div id="selectionSortLog" style="background: #1f2937; padding: 0.75rem; border-radius: 6px; max-height: 150px; overflow-y: auto; font-size: 12px; color: #e5e7eb;">
              <em>Click 'Run Selection Sort' to start visualization</em>
            </div>
          </div>
        </section>

        <section class="concept-section">
          <h2 style="color: #facc15; margin-bottom: 1rem; font-size: 20px;">Step 4: Algorithm Comparison</h2>
          
          <div class="interactive-repl">
            <h4 style="color: #facc15; margin-bottom: 0.5rem; font-size: 14px;">üéÆ Head-to-Head Performance</h4>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 1rem 0;">
              <div style="background: rgba(59, 130, 246, 0.1); border: 2px solid #3b82f6; border-radius: 8px; padding: 1rem; text-align: center;" id="bubbleStats">
                <h4 style="color: #93c5fd; margin-bottom: 0.5rem;">ü´ß Bubble Sort</h4>
                <div style="color: #e5e7eb; font-size: 12px;">Comparisons: <span id="bubbleComparisons">-</span></div>
                <div style="color: #e5e7eb; font-size: 12px;">Swaps: <span id="bubbleSwaps">-</span></div>
                <div style="color: #e5e7eb; font-size: 12px;">Time: <span id="bubbleTime">-</span>ms</div>
              </div>
              <div style="background: rgba(34, 197, 94, 0.1); border: 2px solid #22c55e; border-radius: 8px; padding: 1rem; text-align: center;" id="selectionStats">
                <h4 style="color: #86efac; margin-bottom: 0.5rem;">üéØ Selection Sort</h4>
                <div style="color: #e5e7eb; font-size: 12px;">Comparisons: <span id="selectionComparisons">-</span></div>
                <div style="color: #e5e7eb; font-size: 12px;">Swaps: <span id="selectionSwaps">-</span></div>
                <div style="color: #e5e7eb; font-size: 12px;">Time: <span id="selectionTime">-</span>ms</div>
              </div>
            </div>
            
            <div style="display: flex; gap: 1rem; justify-content: center; margin: 1rem 0;">
              <button onclick="runBothAlgorithms()" class="btn">Compare Both Algorithms</button>
              <button onclick="resetComparison()" class="btn btn-secondary">Reset Comparison</button>
            </div>
            
            <div id="comparisonResult" style="background: #1f2937; padding: 0.75rem; border-radius: 6px; margin-top: 1rem; font-size: 12px; color: #e5e7eb;">
              Click "Compare Both Algorithms" to see performance metrics
            </div>
          </div>
        </section>

        <div class="pitfall-warning">
          <h4 style="color: #fca5a5; margin-bottom: 0.5rem; font-size: 14px;">‚ö†Ô∏è Critical Pitfall: O(n¬≤) Time Complexity</h4>
          <p style="color: #fecaca; font-size: 13px; line-height: 1.6; margin-bottom: 1rem;">
            <strong>Both bubble sort and selection sort have O(n¬≤) time complexity!</strong> They're great for learning but terrible for large datasets.
          </p>
          <pre style="background: #7f1d1d; padding: 0.75rem; border-radius: 6px; font-size: 12px; color: #fecaca;"><code># ‚ùå INEFFICIENT: Using bubble sort on large data
large_data = list(range(10000, 0, -1))  # 10,000 items
bubble_sort(large_data)  # Takes ~25 seconds!

# Time complexity: O(n¬≤)
# For n=10,000: ~100,000,000 operations

# ‚úÖ EFFICIENT: Use Python's built-in sort
large_data = list(range(10000, 0, -1))  # 10,000 items
large_data.sort()  # Takes ~0.01 seconds!

# Time complexity: O(n log n)
# For n=10,000: ~133,000 operations (750x faster!)</code></pre>
        </div>

        <section class="concept-section">
          <h2 style="color: #facc15; margin-bottom: 1rem; font-size: 20px;">Step 5: Knowledge Check</h2>
          
          <div style="margin-bottom: 2rem;">
            <h3 style="color: #e5e7eb; margin-bottom: 1rem;">Question 1: Algorithm Understanding</h3>
            <p style="color: #d1d5db; font-size: 13px; margin-bottom: 1rem;">
              What is the main difference between bubble sort and selection sort?
            </p>
            
            <div class="quiz-option" data-answer="incorrect" style="background: rgba(31, 41, 55, 0.6); border: 1px solid #4b5563; border-radius: 8px; padding: 1rem; margin: 0.5rem 0; cursor: pointer; transition: all 0.3s ease;">
              <p style="color: #e5e7eb; font-size: 12px;">Bubble sort is faster than selection sort</p>
            </div>
            
            <div class="quiz-option" data-answer="correct" style="background: rgba(31, 41, 55, 0.6); border: 1px solid #4b5563; border-radius: 8px; padding: 1rem; margin: 0.5rem 0; cursor: pointer; transition: all 0.3s ease;">
              <p style="color: #e5e7eb; font-size: 12px;">Bubble sort compares adjacent elements, selection sort finds minimum</p>
            </div>
            
            <div class="quiz-option" data-answer="incorrect" style="background: rgba(31, 41, 55, 0.6); border: 1px solid #4b5563; border-radius: 8px; padding: 1rem; margin: 0.5rem 0; cursor: pointer; transition: all 0.3s ease;">
              <p style="color: #e5e7eb; font-size: 12px;">Selection sort uses more memory</p>
            </div>
          </div>

          <div style="margin-bottom: 2rem;">
            <h3 style="color: #e5e7eb; margin-bottom: 1rem;">Question 2: Time Complexity</h3>
            <p style="color: #d1d5db; font-size: 13px; margin-bottom: 1rem;">
              What is the time complexity of both bubble sort and selection sort?
            </p>
            
            <div class="quiz-option" data-answer="incorrect" style="background: rgba(31, 41, 55, 0.6); border: 1px solid #4b5563; border-radius: 8px; padding: 1rem; margin: 0.5rem 0; cursor: pointer; transition: all 0.3s ease;">
              <p style="color: #e5e7eb; font-size: 12px;">O(n)</p>
            </div>
            
            <div class="quiz-option" data-answer="incorrect" style="background: rgba(31, 41, 55, 0.6); border: 1px solid #4b5563; border-radius: 8px; padding: 1rem; margin: 0.5rem 0; cursor: pointer; transition: all 0.3s ease;">
              <p style="color: #e5e7eb; font-size: 12px;">O(n log n)</p>
            </div>
            
            <div class="quiz-option" data-answer="correct" style="background: rgba(31, 41, 55, 0.6); border: 1px solid #4b5563; border-radius: 8px; padding: 1rem; margin: 0.5rem 0; cursor: pointer; transition: all 0.3s ease;">
              <p style="color: #e5e7eb; font-size: 12px;">O(n¬≤)</p>
            </div>
          </div>

          <button id="checkSortingQuiz" class="btn btn-green" style="margin-top: 1rem;">Check My Understanding</button>
          <div id="sortingQuizResult" class="message-box" style="display: none; margin-top: 1rem;"></div>
        </section>

        <footer style="background: rgba(15, 23, 42, 0.8); border-top: 2px solid #facc15; margin-top: 4rem; padding: 2rem 0; text-align: center; backdrop-filter: blur(10px);">
          <p style="color: #facc15; margin-bottom: 0.5rem;">üÉè Basic Sorting Mastered! Ready for Advanced Algorithms? üÉè</p>
          <p style="font-size: 12px; color: #9ca3af;">
            <a href="graphs.html" style="color: #facc15; margin-right: 1rem;">‚Üê Back: Graphs</a>
            <a href="../index.html" style="color: #facc15; margin-right: 1rem;">üè† Main Menu</a>
            <a href="sorting-merge-joke.html" style="color: #facc15;">Next: Merge Sort ‚Üí</a>
          </p>
        </footer>
      </main>
    </div>



    <script>
      // Global variables for algorithms
      let bubbleArray = [64, 34, 25, 12, 22, 11, 90, 50, 77, 8];
      let selectionArray = [64, 34, 25, 12, 22, 11, 90, 50, 77, 8];
      let bubbleStats = { comparisons: 0, swaps: 0, time: 0 };
      let selectionStats = { comparisons: 0, swaps: 0, time: 0 };
      
      // Initialize visualizations
      function initializeSortContainers() {
        createBars('bubbleSortContainer', bubbleArray, 'bubble');
        createBars('selectionSortContainer', selectionArray, 'selection');
      }
      
      function createBars(containerId, array, prefix) {
        const container = document.getElementById(containerId);
        container.innerHTML = '';
        
        array.forEach((value, index) => {
          const bar = document.createElement('div');
          bar.className = 'sort-bar';
          bar.id = prefix + '-bar-' + index;
          bar.style.height = (value * 3) + 'px';
          
          const label = document.createElement('div');
          label.className = 'value-label';
          label.textContent = value;
          
          const wrapper = document.createElement('div');
          wrapper.style.display = 'flex';
          wrapper.style.flexDirection = 'column';
          wrapper.style.alignItems = 'center';
          wrapper.appendChild(label);
          wrapper.appendChild(bar);
          
          container.appendChild(wrapper);
        });
      }
      
      // Bubble Sort Implementation
      async function runBubbleSort() {
        const speed = parseInt(document.getElementById('bubbleSpeed').value);
        const log = document.getElementById('bubbleSortLog');
        
        bubbleStats = { comparisons: 0, swaps: 0, time: Date.now() };
        log.innerHTML = 'Starting Bubble Sort...\n';
        
        const arr = [...bubbleArray];
        const n = arr.length;
        
        for (let i = 0; i < n; i++) {
          let swapped = false;
          
          for (let j = 0; j < n - i - 1; j++) {
            // Highlight comparison
            highlightBars('bubble', [j, j + 1], 'comparing');
            bubbleStats.comparisons++;
            
            await sleep(speed);
            
            if (arr[j] > arr[j + 1]) {
              // Swap
              [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];
              bubbleStats.swaps++;
              swapped = true;
              
              highlightBars('bubble', [j, j + 1], 'swapping');
              updateBarHeights('bubble', arr);
              
              log.innerHTML += `Swapped ${arr[j + 1]} and ${arr[j]}\n`;
              log.scrollTop = log.scrollHeight;
              
              await sleep(speed);
            }
            
            clearHighlights('bubble');
          }
          
          // Mark as sorted
          const sortedBar = document.getElementById(`bubble-bar-${n - i - 1}`);
          if (sortedBar) sortedBar.classList.add('sorted');
          
          if (!swapped) break;
        }
        
        bubbleStats.time = Date.now() - bubbleStats.time;
        log.innerHTML += `Bubble Sort Complete! Comparisons: ${bubbleStats.comparisons}, Swaps: ${bubbleStats.swaps}\n`;
        
        // Mark all as sorted
        for (let i = 0; i < n; i++) {
          const bar = document.getElementById(`bubble-bar-${i}`);
          if (bar) bar.classList.add('sorted');
        }
      }
      
      // Selection Sort Implementation
      async function runSelectionSort() {
        const speed = parseInt(document.getElementById('selectionSpeed').value);
        const log = document.getElementById('selectionSortLog');
        
        selectionStats = { comparisons: 0, swaps: 0, time: Date.now() };
        log.innerHTML = 'Starting Selection Sort...\n';
        
        const arr = [...selectionArray];
        const n = arr.length;
        
        for (let i = 0; i < n; i++) {
          let minIdx = i;
          
          // Highlight current minimum
          highlightBars('selection', [minIdx], 'minimum');
          
          for (let j = i + 1; j < n; j++) {
            // Highlight comparison
            highlightBars('selection', [j], 'comparing');
            selectionStats.comparisons++;
            
            await sleep(speed);
            
            if (arr[j] < arr[minIdx]) {
              // Clear old minimum
              clearHighlights('selection');
              minIdx = j;
              highlightBars('selection', [minIdx], 'minimum');
              
              log.innerHTML += `New minimum found: ${arr[minIdx]} at index ${minIdx}\n`;
              log.scrollTop = log.scrollHeight;
            }
            
            if (j !== minIdx) {
              clearHighlights('selection', 'comparing');
            }
          }
          
          // Swap if needed
          if (minIdx !== i) {
            [arr[i], arr[minIdx]] = [arr[minIdx], arr[i]];
            selectionStats.swaps++;
            
            highlightBars('selection', [i, minIdx], 'swapping');
            updateBarHeights('selection', arr);
            
            log.innerHTML += `Swapped ${arr[minIdx]} and ${arr[i]}\n`;
            log.scrollTop = log.scrollHeight;
            
            await sleep(speed);
          }
          
          clearHighlights('selection');
          
          // Mark as sorted
          const sortedBar = document.getElementById(`selection-bar-${i}`);
          if (sortedBar) sortedBar.classList.add('sorted');
        }
        
        selectionStats.time = Date.now() - selectionStats.time;
        log.innerHTML += `Selection Sort Complete! Comparisons: ${selectionStats.comparisons}, Swaps: ${selectionStats.swaps}\n`;
      }
      
      // Helper functions
      function highlightBars(prefix, indices, className) {
        indices.forEach(index => {
          const bar = document.getElementById(`${prefix}-bar-${index}`);
          if (bar) bar.classList.add(className);
        });
      }
      
      function clearHighlights(prefix, className = null) {
        const container = document.getElementById(prefix + 'SortContainer');
        const bars = container.querySelectorAll('.sort-bar');
        bars.forEach(bar => {
          if (className) {
            bar.classList.remove(className);
          } else {
            bar.classList.remove('comparing', 'swapping', 'minimum');
          }
        });
      }
      
      function updateBarHeights(prefix, array) {
        array.forEach((value, index) => {
          const bar = document.getElementById(`${prefix}-bar-${index}`);
          if (bar) bar.style.height = (value * 3) + 'px';
          
          const label = bar.parentElement.querySelector('.value-label');
          if (label) label.textContent = value;
        });
      }
      
      function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
      }
      
      // Reset functions
      function resetBubbleSort() {
        bubbleArray = [64, 34, 25, 12, 22, 11, 90, 50, 77, 8];
        createBars('bubbleSortContainer', bubbleArray, 'bubble');
        document.getElementById('bubbleSortLog').innerHTML = '<em>Click "Run Bubble Sort" to start visualization</em>';
      }
      
      function resetSelectionSort() {
        selectionArray = [64, 34, 25, 12, 22, 11, 90, 50, 77, 8];
        createBars('selectionSortContainer', selectionArray, 'selection');
        document.getElementById('selectionSortLog').innerHTML = '<em>Click "Run Selection Sort" to start visualization</em>';
      }
      
      // Comparison functions
      async function runBothAlgorithms() {
        resetBubbleSort();
        resetSelectionSort();
        
        // Run both algorithms simultaneously (for timing comparison)
        const startTime = Date.now();
        
        // Quick run without visualization for accurate timing
        const bubbleTestArray = [...bubbleArray];
        const selectionTestArray = [...selectionArray];
        
        const bubbleStartTime = Date.now();
        bubbleSortQuick(bubbleTestArray);
        const bubbleEndTime = Date.now();
        
        const selectionStartTime = Date.now();
        selectionSortQuick(selectionTestArray);
        const selectionEndTime = Date.now();
        
        // Update display
        document.getElementById('bubbleComparisons').textContent = bubbleStats.comparisons;
        document.getElementById('bubbleSwaps').textContent = bubbleStats.swaps;
        document.getElementById('bubbleTime').textContent = bubbleEndTime - bubbleStartTime;
        
        document.getElementById('selectionComparisons').textContent = selectionStats.comparisons;
        document.getElementById('selectionSwaps').textContent = selectionStats.swaps;
        document.getElementById('selectionTime').textContent = selectionEndTime - selectionStartTime;
        
        // Determine winner
        const bubbleTotal = bubbleStats.comparisons + bubbleStats.swaps;
        const selectionTotal = selectionStats.comparisons + selectionStats.swaps;
        
        document.getElementById('bubbleStats').classList.remove('winner', 'loser');
        document.getElementById('selectionStats').classList.remove('winner', 'loser');
        
        if (bubbleTotal < selectionTotal) {
          document.getElementById('bubbleStats').classList.add('winner');
          document.getElementById('selectionStats').classList.add('loser');
        } else if (selectionTotal < bubbleTotal) {
          document.getElementById('selectionStats').classList.add('winner');
          document.getElementById('bubbleStats').classList.add('loser');
        }
        
        const result = document.getElementById('comparisonResult');
        result.innerHTML = `
Performance Comparison Results:
- Bubble Sort: ${bubbleStats.comparisons} comparisons, ${bubbleStats.swaps} swaps
- Selection Sort: ${selectionStats.comparisons} comparisons, ${selectionStats.swaps} swaps

${bubbleTotal < selectionTotal ? 'Bubble Sort' : selectionTotal < bubbleTotal ? 'Selection Sort' : 'Tie'} performed fewer total operations!

Note: Both algorithms have O(n¬≤) time complexity, so performance differences are minor for small datasets.
        `;
      }
      
      function bubbleSortQuick(arr) {
        bubbleStats = { comparisons: 0, swaps: 0 };
        const n = arr.length;
        
        for (let i = 0; i < n; i++) {
          let swapped = false;
          for (let j = 0; j < n - i - 1; j++) {
            bubbleStats.comparisons++;
            if (arr[j] > arr[j + 1]) {
              [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];
              bubbleStats.swaps++;
              swapped = true;
            }
          }
          if (!swapped) break;
        }
      }
      
      function selectionSortQuick(arr) {
        selectionStats = { comparisons: 0, swaps: 0 };
        const n = arr.length;
        
        for (let i = 0; i < n; i++) {
          let minIdx = i;
          for (let j = i + 1; j < n; j++) {
            selectionStats.comparisons++;
            if (arr[j] < arr[minIdx]) {
              minIdx = j;
            }
          }
          if (minIdx !== i) {
            [arr[i], arr[minIdx]] = [arr[minIdx], arr[i]];
            selectionStats.swaps++;
          }
        }
      }
      
      function resetComparison() {
        document.getElementById('bubbleComparisons').textContent = '-';
        document.getElementById('bubbleSwaps').textContent = '-';
        document.getElementById('bubbleTime').textContent = '-';
        document.getElementById('selectionComparisons').textContent = '-';
        document.getElementById('selectionSwaps').textContent = '-';
        document.getElementById('selectionTime').textContent = '-';
        
        document.getElementById('bubbleStats').classList.remove('winner', 'loser');
        document.getElementById('selectionStats').classList.remove('winner', 'loser');
        
        document.getElementById('comparisonResult').innerHTML = 'Click "Compare Both Algorithms" to see performance metrics';
      }
      
      // Quiz functionality
      document.addEventListener('DOMContentLoaded', function() {
        const quizOptions = document.querySelectorAll('.quiz-option');
        const checkSortingQuizBtn = document.getElementById('checkSortingQuiz');
        const sortingQuizResult = document.getElementById('sortingQuizResult');

        quizOptions.forEach(option => {
          option.addEventListener('click', function() {
            const siblings = this.parentElement.querySelectorAll('.quiz-option');
            siblings.forEach(s => s.style.borderColor = '#4b5563');
            
            this.style.borderColor = '#facc15';
            this.dataset.selected = 'true';
          });
        });

        checkSortingQuizBtn.addEventListener('click', function() {
          let correct = 0;
          let total = 0;
          
          const questions = document.querySelectorAll('.concept-section > div');
          questions.forEach(question => {
            const options = question.querySelectorAll('.quiz-option');
            options.forEach(option => {
              if (option.dataset.selected === 'true') {
                total++;
                if (option.dataset.answer === 'correct') {
                  correct++;
                  option.style.borderColor = '#10b981';
                  option.style.background = 'rgba(16, 185, 129, 0.2)';
                } else {
                  option.style.borderColor = '#ef4444';
                  option.style.background = 'rgba(239, 68, 68, 0.2)';
                }
              }
            });
          });

          sortingQuizResult.style.display = 'block';
          if (correct === total && total > 0) {
            sortingQuizResult.className = 'message-box message-box-success';
            sortingQuizResult.innerHTML = `üéâ Perfect! ${correct}/${total} correct. You understand basic sorting algorithms!`;
          } else {
            sortingQuizResult.className = 'message-box message-box-info';
            sortingQuizResult.innerHTML = `${correct}/${total} correct. Review the sorting concepts above, especially algorithm strategies and time complexity!`;
          }
        });
        
        // Initialize everything
        initializeSortContainers();
        
        // Progress tracking
        localStorage.setItem('completedSortingBasic', 'true');
      });
    </script>
  </body>
</html>
