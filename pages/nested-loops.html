<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nested Loops | Interactive Python Guide</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/shared-styles.css">
    <style>
      /* Page-specific styles for loop visualization */
      .grid-cell {
        background: rgba(250, 204, 21, 0.1);
        border: 1px solid rgba(250, 204, 21, 0.3);
        border-radius: 6px;
        padding: 0.5rem;
        text-align: center;
        font-size: 0.75rem;
        transition: all 0.3s ease;
      }
      
      .grid-cell.active {
        background: rgba(250, 204, 21, 0.4);
        border-color: #facc15;
        transform: scale(1.1);
        box-shadow: 0 0 10px rgba(250, 204, 21, 0.6);
      }
    </style>
  </head>
  <body class="page-layout">
    <div class="page-console-border">
      <header>
        <div class="lesson-hero">
          <div class="lesson-hero-content">
            <h1 class="lesson-title">
              <a href="../index.html" style="color: inherit; text-decoration: none;">
                Interactive Guide to Python
              </a>
            </h1>
            <h2 class="lesson-subtitle">Nested Loops: Loops Within Loops</h2>
            <p class="lesson-subtitle">
              üîÑ Iteration Patterns ‚Ä¢ üéØ 2D Processing ‚Ä¢ ‚ö° Powerful Combinations
            </p>
          </div>
        </div>

        <nav class="page-navigation">
          <a href="nested-conditionals.html" class="nav-btn">‚Üê Nested Conditionals</a>
          <a href="../index.html" class="nav-btn">üè† Home</a>
          <a href="error-handling.html" class="nav-btn">Error Handling ‚Üí</a>
        </nav>
      </header>

      <main class="page-content-wrapper">
        <!-- Problem Motivation -->
        <section class="concept-section">
          <h2 class="section-title-8bit">üéØ Why Do We Need Nested Loops?</h2>
          <p class="mb-4">
            Imagine you're organizing a massive library. You need to visit every shelf (outer loop), and on each shelf, 
            you need to check every single book (inner loop). Or think about a farmer plowing a field: they plow each row (outer loop), 
            and within each row, they need to cover every inch of soil (inner loop).
          </p>
          <p class="mb-4">
            <strong>The Problem:</strong> Single loops can only handle one-dimensional tasks. But what about grids, tables, 
            combinations, or any situation where you need to process data in multiple dimensions? That's where nested loops become essential - 
            they let you work with complex, multi-layered data structures efficiently.
          </p>
        </section>

        <!-- Mental Model -->
        <div class="mental-model-box">
          <h3>üß† Mental Model: Clock Hands & Assembly Lines</h3>
          <p class="mb-4">
            Think of nested loops like a <strong>clock with two hands</strong>: the hour hand (outer loop) moves slowly, 
            and for each position of the hour hand, the minute hand (inner loop) makes a complete circle. 
            The minute hand completes its full rotation for each hour!
          </p>
          <p class="mb-4">
            Or imagine an <strong>assembly line with quality control</strong>: for each product that comes down the line (outer loop), 
            a quality inspector checks every component on that product (inner loop). The inspector finishes checking all components 
            before the next product arrives.
          </p>
          <div class="code-block">
# Like a clock: hour hand (i) and minute hand (j)
for i in range(3):      # Hour hand: 0, 1, 2
    print(f"Hour: {i}")
    for j in range(4):  # Minute hand: 0, 1, 2, 3 (for EACH hour)
        print(f"  Minute: {j}")
    print("---")

# Output shows the pattern:
# Hour: 0
#   Minute: 0, 1, 2, 3
# Hour: 1  
#   Minute: 0, 1, 2, 3
# Hour: 2
#   Minute: 0, 1, 2, 3
          </div>
        </div>

        <!-- Syntax Introduction -->
        <section class="concept-section">
          <h2 class="section-title-8bit">üìù Nested Loop Mechanics</h2>
          <p class="mb-4">
            The computer processes nested loops with mechanical precision. The outer loop starts, then the inner loop runs completely, 
            then the outer loop advances one step, then the inner loop runs completely again. This is the notional machine at work: 
            <strong>sequential, literal, and oblivious</strong> to our human intuition about "doing things at the same time."
          </p>
          
          <div class="code-block">
# Basic nested structure
for outer_var in range(3):
    print(f"Outer loop: {outer_var}")
    for inner_var in range(2):
        print(f"  Inner loop: {inner_var}")
        # This line executes 6 times total (3 √ó 2)
    print("  Inner loop finished")
print("All loops finished")
          </div>

          <div class="code-block">
# Real example: Creating a multiplication table
for row in range(1, 4):      # Rows 1, 2, 3
    for col in range(1, 4):  # Columns 1, 2, 3
        product = row * col
        print(f"{row} √ó {col} = {product}", end="  ")
    print()  # New line after each row

# Output:
# 1 √ó 1 = 1  1 √ó 2 = 2  1 √ó 3 = 3
# 2 √ó 1 = 2  2 √ó 2 = 4  2 √ó 3 = 6  
# 3 √ó 1 = 3  3 √ó 2 = 6  3 √ó 3 = 9
          </div>
        </section>

        <!-- Interactive Exploration -->
        <div class="interactive-repl">
          <h3>üî¨ Interactive Loop Visualizer</h3>
          <p class="mb-4">
            Watch how nested loops work step by step. See the outer loop control the inner loop's complete execution!
          </p>
          
          <div class="grid-layout">
            <div>
              <label class="input-label">Outer Loop Range:</label>
              <input type="number" id="outerRange" class="input-field" value="3" min="1" max="5">
            </div>
            <div>
              <label class="input-label">Inner Loop Range:</label>
              <input type="number" id="innerRange" class="input-field" value="4" min="1" max="6">
            </div>
          </div>
          
          <button id="runVisualization" class="btn">Run Visualization</button>
          <button id="resetVisualization" class="btn">Reset</button>
          
                      <div class="grid-layout">
              <div>
                <h4 class="section-title-8bit">Loop State:</h4>
                <div class="interactive-section">
                  <p>Outer: <span id="outerCounter" class="highlight-text">0</span></p>
                  <p>Inner: <span id="innerCounter" class="highlight-text">0</span></p>
                  <p>Total Iterations: <span id="totalCounter" class="highlight-text">0</span></p>
                </div>
              </div>
            
            <div>
              <h4 class="section-title-8bit">Coordinate Grid:</h4>
              <div id="coordinateGrid" class="interactive-section" style="display: grid; gap: 0.5rem; padding: 1rem;">
                <!-- Grid will be generated here -->
              </div>
            </div>
          </div>
          
          <div id="loopOutput" class="output-display">
            Click "Run Visualization" to see nested loops in action...
          </div>
        </div>

        <!-- Common Pitfalls -->
        <div class="pitfall-warning">
          <h3>‚ö†Ô∏è Critical Pitfall: Performance Explosion</h3>
          <p class="mb-4">
            <strong>Danger:</strong> Nested loops multiply their iterations! A loop with 100 iterations inside another loop with 100 iterations 
            creates 10,000 total iterations. This can make your program incredibly slow or even crash.
          </p>
          
          <div class="code-block">
# DANGEROUS: This creates 1,000,000 iterations!
for i in range(1000):
    for j in range(1000):
        print(f"({i}, {j})")  # This will take forever!
          </div>
          
          <div class="code-block">
# BETTER: Be mindful of the total iterations
outer_size = 10
inner_size = 10
total_iterations = outer_size * inner_size
print(f"This will run {total_iterations} times")

for i in range(outer_size):
    for j in range(inner_size):
        # Do your work here
        pass
          </div>
          
          <p class="mb-4">
            <strong>Rule of thumb:</strong> Always calculate total iterations (outer √ó inner). If it's more than 10,000, 
            consider if there's a more efficient approach. Your computer is fast, but not infinitely fast!
          </p>
        </div>

        <!-- Practice Project -->
        <div class="interactive-repl">
          <h3>üéÆ Practice: Pattern Generator</h3>
          <p class="mb-4">
            Create different patterns using nested loops. See how changing the loop structure creates different visual effects!
          </p>
          
          <div class="grid-layout">
            <div>
              <label class="input-label">Pattern Type:</label>
              <select id="patternType" class="select-field">
                <option value="rectangle">Rectangle</option>
                <option value="triangle">Triangle</option>
                <option value="diamond">Diamond</option>
                <option value="checkerboard">Checkerboard</option>
              </select>
            </div>
            <div>
              <label class="input-label">Size:</label>
              <input type="number" id="patternSize" class="input-field" value="5" min="3" max="8">
            </div>
            <div>
              <label class="input-label">Character:</label>
              <input type="text" id="patternChar" class="input-field" value="*" maxlength="1">
            </div>
          </div>
          
          <button id="generatePattern" class="btn">Generate Pattern</button>
          
          <div id="patternOutput" class="output-display">
            Select pattern settings and click "Generate Pattern"...
          </div>
        </div>

        <!-- Assessment -->
        <div class="assessment-section">
          <h3>üéØ Mastery Assessment: Nested Loop Logic</h3>
          <p class="mb-4">
            Test your understanding of how nested loops execute. Remember: the inner loop completes fully for each outer iteration!
          </p>
          
          <div class="quiz-question" style="margin-bottom: 2rem;">
            <p class="mb-4">
              Question 1: How many times does "Hello" get printed?
            </p>
            <div class="code-block" style="margin-bottom: 1rem;">
for i in range(3):
    for j in range(4):
        print("Hello")
            </div>
            <div class="quiz-option" data-question="1" data-answer="a">
              A) 3 times
            </div>
            <div class="quiz-option" data-question="1" data-answer="b">
              B) 4 times
            </div>
            <div class="quiz-option" data-question="1" data-answer="c">
              C) 7 times (3 + 4)
            </div>
            <div class="quiz-option" data-question="1" data-answer="d">
              D) 12 times (3 √ó 4)
            </div>
          </div>
          
          <div class="quiz-question" style="margin-bottom: 2rem;">
            <p class="mb-4">
              Question 2: What's the last coordinate printed?
            </p>
            <div class="code-block" style="margin-bottom: 1rem;">
for row in range(2):
    for col in range(3):
        print(f"({row}, {col})")
            </div>
            <div class="quiz-option" data-question="2" data-answer="a">
              A) (2, 3)
            </div>
            <div class="quiz-option" data-question="2" data-answer="b">
              B) (1, 2)
            </div>
            <div class="quiz-option" data-question="2" data-answer="c">
              C) (0, 2)
            </div>
            <div class="quiz-option" data-question="2" data-answer="d">
              D) (1, 3)
            </div>
          </div>

          <div class="quiz-question" style="margin-bottom: 2rem;">
            <p class="mb-4">
              Question 3: Performance Analysis
            </p>
            <p class="mb-4">
              Which nested loop structure creates the most total iterations?
            </p>
            <div class="quiz-option" data-question="3" data-answer="a">
              A) for i in range(10): for j in range(10): # 100 iterations
            </div>
            <div class="quiz-option" data-question="3" data-answer="b">
              B) for i in range(5): for j in range(50): # 250 iterations
            </div>
            <div class="quiz-option" data-question="3" data-answer="c">
              C) for i in range(20): for j in range(20): # 400 iterations
            </div>
            <div class="quiz-option" data-question="3" data-answer="d">
              D) for i in range(100): # 100 iterations (single loop)
            </div>
          </div>

          <div class="quiz-question" style="margin-bottom: 2rem;">
            <p class="mb-4">
              Question 4: Pattern Recognition
            </p>
            <p class="mb-4">
              What pattern does this code create?
            </p>
            <div class="code-block" style="margin-bottom: 1rem;">
for i in range(3):
    for j in range(i + 1):
        print("*", end="")
    print()
            </div>
            <div class="quiz-option" data-question="4" data-answer="a">
              A) Rectangle of stars
            </div>
            <div class="quiz-option" data-question="4" data-answer="b">
              B) Right triangle of stars
            </div>
            <div class="quiz-option" data-question="4" data-answer="c">
              C) Diamond shape
            </div>
            <div class="quiz-option" data-question="4" data-answer="d">
              D) Single line of stars
            </div>
          </div>

          <div class="quiz-question" style="margin-bottom: 2rem;">
            <p class="mb-4">
              Question 5: Loop Order Understanding
            </p>
            <p class="mb-4">
              In nested loops, what happens to the inner loop variable?
            </p>
            <div class="quiz-option" data-question="5" data-answer="a">
              A) It completes its full range for each outer loop iteration
            </div>
            <div class="quiz-option" data-question="5" data-answer="b">
              B) It only runs once per program
            </div>
            <div class="quiz-option" data-question="5" data-answer="c">
              C) It runs independently of the outer loop
            </div>
            <div class="quiz-option" data-question="5" data-answer="d">
              D) It skips values when the outer loop increments
            </div>
          </div>
          
          <button id="checkQuiz" class="btn">Check Answers</button>
          <div id="quizResults" class="output-display" style="display: none;">
            Quiz results will appear here...
          </div>
        </div>

        <!-- Reflection Questions -->
        <section class="concept-section">
          <h2 class="section-title-8bit">ü§î Reflection Questions</h2>
          <ul class="reflection-list">
            <li>How do nested loops relate to real-world tasks you do every day?</li>
            <li>When would you use nested loops instead of a single loop?</li>
            <li>How can you calculate the total number of iterations before running nested loops?</li>
            <li>What strategies can you use to avoid performance problems with nested loops?</li>
          </ul>
        </section>
      </main>

      <footer style="background: rgba(15, 23, 42, 0.8); border-top: 2px solid #facc15; margin-top: 4rem; padding: 2rem 0; text-align: center;">
        <div style="max-width: 1400px; margin: 0 auto; padding: 0 2rem;">
                      <p class="highlight-text">üéØ Ready to handle errors gracefully?</p>
            <a href="error-handling.html" class="btn">Next: Error Handling ‚Üí</a>
            <a href="../index.html" class="nav-btn">üè† Back to Home</a>
        </div>
      </footer>
    </div>

    <script>
      // Loop visualization system
      let visualizationRunning = false;
      let visualizationTimeout;

      document.getElementById('runVisualization').addEventListener('click', function() {
        if (visualizationRunning) return;
        
        const outerRange = parseInt(document.getElementById('outerRange').value);
        const innerRange = parseInt(document.getElementById('innerRange').value);
        const output = document.getElementById('loopOutput');
        const grid = document.getElementById('coordinateGrid');
        
        // Setup grid
        grid.style.gridTemplateColumns = `repeat(${innerRange}, 1fr)`;
        grid.innerHTML = '';
        
        for (let i = 0; i < outerRange; i++) {
          for (let j = 0; j < innerRange; j++) {
            const cell = document.createElement('div');
            cell.className = 'grid-cell';
            cell.textContent = `(${i},${j})`;
            cell.id = `cell-${i}-${j}`;
            grid.appendChild(cell);
          }
        }
        
        visualizationRunning = true;
        let totalIterations = 0;
        let outputText = "=== NESTED LOOP EXECUTION ===\n\n";
        
        function runStep(outerIndex, innerIndex) {
          if (outerIndex >= outerRange) {
            outputText += "\nüéâ All loops completed!";
            output.textContent = outputText;
            document.getElementById('outerCounter').textContent = 'Done';
            document.getElementById('innerCounter').textContent = 'Done';
            visualizationRunning = false;
            return;
          }
          
          if (innerIndex === 0) {
            outputText += `Outer loop: i = ${outerIndex}\n`;
          }
          
          if (innerIndex < innerRange) {
            totalIterations++;
            outputText += `  Inner loop: j = ${innerIndex} ‚Üí (${outerIndex}, ${innerIndex})\n`;
            
            // Update counters
            document.getElementById('outerCounter').textContent = outerIndex;
            document.getElementById('innerCounter').textContent = innerIndex;
            document.getElementById('totalCounter').textContent = totalIterations;
            
            // Highlight current cell
            document.querySelectorAll('.grid-cell').forEach(cell => cell.classList.remove('active'));
            document.getElementById(`cell-${outerIndex}-${innerIndex}`).classList.add('active');
            
            output.textContent = outputText;
            
            visualizationTimeout = setTimeout(() => {
              runStep(outerIndex, innerIndex + 1);
            }, 800);
          } else {
            outputText += `  Inner loop finished for i = ${outerIndex}\n\n`;
            output.textContent = outputText;
            
            visualizationTimeout = setTimeout(() => {
              runStep(outerIndex + 1, 0);
            }, 1200);
          }
        }
        
        runStep(0, 0);
      });

      document.getElementById('resetVisualization').addEventListener('click', function() {
        if (visualizationTimeout) {
          clearTimeout(visualizationTimeout);
        }
        visualizationRunning = false;
        
        document.getElementById('outerCounter').textContent = '-';
        document.getElementById('innerCounter').textContent = '-';
        document.getElementById('totalCounter').textContent = '0';
        document.getElementById('loopOutput').textContent = 'Click "Run Visualization" to see nested loops in action...';
        
        document.querySelectorAll('.grid-cell').forEach(cell => cell.classList.remove('active'));
      });

      // Pattern generator
      document.getElementById('generatePattern').addEventListener('click', function() {
        const patternType = document.getElementById('patternType').value;
        const size = parseInt(document.getElementById('patternSize').value);
        const char = document.getElementById('patternChar').value || '*';
        const output = document.getElementById('patternOutput');
        
        let pattern = `=== ${patternType.toUpperCase()} PATTERN ===\n\n`;
        
        switch (patternType) {
          case 'rectangle':
            for (let i = 0; i < size; i++) {
              for (let j = 0; j < size; j++) {
                pattern += char + ' ';
              }
              pattern += '\n';
            }
            break;
            
          case 'triangle':
            for (let i = 0; i < size; i++) {
              for (let j = 0; j <= i; j++) {
                pattern += char + ' ';
              }
              pattern += '\n';
            }
            break;
            
          case 'diamond':
            // Upper half
            for (let i = 0; i < size; i++) {
              for (let j = 0; j < size - i - 1; j++) {
                pattern += '  ';
              }
              for (let j = 0; j <= i; j++) {
                pattern += char + ' ';
              }
              pattern += '\n';
            }
            // Lower half
            for (let i = size - 2; i >= 0; i--) {
              for (let j = 0; j < size - i - 1; j++) {
                pattern += '  ';
              }
              for (let j = 0; j <= i; j++) {
                pattern += char + ' ';
              }
              pattern += '\n';
            }
            break;
            
          case 'checkerboard':
            for (let i = 0; i < size; i++) {
              for (let j = 0; j < size; j++) {
                if ((i + j) % 2 === 0) {
                  pattern += char + ' ';
                } else {
                  pattern += '  ';
                }
              }
              pattern += '\n';
            }
            break;
        }
        
        output.textContent = pattern;
      });

      // Quiz system
      let selectedAnswers = {};
      
      document.querySelectorAll('.quiz-option').forEach(option => {
        option.addEventListener('click', function() {
          const question = this.dataset.question;
          const answer = this.dataset.answer;
          
          // Remove previous selection for this question
          document.querySelectorAll(`[data-question="${question}"]`).forEach(opt => {
            opt.classList.remove('selected');
          });
          
          // Mark this option as selected
          this.classList.add('selected');
          selectedAnswers[question] = answer;
        });
      });
      
      document.getElementById('checkQuiz').addEventListener('click', function() {
        const correctAnswers = {
          '1': 'd', // 12 times (3 √ó 4)
          '2': 'b', // (1, 2)
          '3': 'c', // 400 iterations (20 √ó 20)
          '4': 'b', // Right triangle of stars
          '5': 'a'  // Completes full range for each outer iteration
        };
        
        let results = "=== QUIZ RESULTS ===\n\n";
        let score = 0;
        
        for (let question in correctAnswers) {
          const userAnswer = selectedAnswers[question];
          const correctAnswer = correctAnswers[question];
          const isCorrect = userAnswer === correctAnswer;
          
          if (isCorrect) score++;
          
          results += `Question ${question}: ${isCorrect ? '‚úì CORRECT' : '‚úó INCORRECT'}\n`;
          
          if (question === '1') {
            results += isCorrect ? 
              "  Explanation: Outer loop runs 3 times, inner loop runs 4 times for each outer iteration: 3 √ó 4 = 12\n" :
              "  Explanation: Nested loops multiply! 3 outer iterations √ó 4 inner iterations = 12 total iterations.\n";
          } else if (question === '2') {
            results += isCorrect ?
              "  Explanation: range(2) gives 0,1 and range(3) gives 0,1,2. Last combination is (1,2).\n" :
              "  Explanation: Remember range(n) goes from 0 to n-1. So range(2) = [0,1] and range(3) = [0,1,2].\n";
          } else if (question === '3') {
            results += isCorrect ?
              "  Explanation: 20 √ó 20 = 400 iterations, which is more than the other options.\n" :
              "  Explanation: Calculate total iterations by multiplying: 10√ó10=100, 5√ó50=250, 20√ó20=400, single loop=100.\n";
          } else if (question === '4') {
            results += isCorrect ?
              "  Explanation: range(i+1) creates increasing rows: 1 star, 2 stars, 3 stars = right triangle.\n" :
              "  Explanation: The inner loop runs (i+1) times, creating rows of increasing length.\n";
          } else if (question === '5') {
            results += isCorrect ?
              "  Explanation: The inner loop resets and runs completely for each iteration of the outer loop.\n" :
              "  Explanation: This is the key behavior of nested loops - inner completes fully each time.\n";
          }
          
          // Visual feedback
          document.querySelectorAll(`[data-question="${question}"]`).forEach(opt => {
            if (opt.dataset.answer === correctAnswer) {
              opt.classList.add('correct');
            } else if (opt.dataset.answer === userAnswer && userAnswer !== correctAnswer) {
              opt.classList.add('incorrect');
            }
          });
        }
        
        results += `\nFinal Score: ${score}/5 (${Math.round(score/5*100)}%)\n`;
        
        if (score === 5) {
          results += "\nüéâ Perfect! You understand nested loops completely!";
        } else if (score >= 4) {
          results += "\nüëç Excellent! You have a solid understanding of nested loops.";
        } else if (score >= 3) {
          results += "\nüëç Good progress! Review the explanations above.";
        } else {
          results += "\nüìö Keep practicing! Remember: nested loops multiply iterations.";
        }
        
        document.getElementById('quizResults').textContent = results;
        document.getElementById('quizResults').style.display = 'block';
      });

      // Progress tracking
      document.addEventListener('DOMContentLoaded', function() {
        // Mark this topic as visited
        let visitedTopics = JSON.parse(localStorage.getItem('visitedTopics') || '[]');
        const currentTopic = 'pages/nested-loops.html';
        if (!visitedTopics.includes(currentTopic)) {
          visitedTopics.push(currentTopic);
          localStorage.setItem('visitedTopics', JSON.stringify(visitedTopics));
        }
      });
    </script>
  </body>
</html>
