<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Learn 2D Lists (Lists of Lists)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/shared-styles.css">
  </head>
  <body class="bg-blue-700 text-gray-300 p-4 md:p-8">
    <header class="text-center mb-8">
      <a href="../index.html" class="text-3xl md:text-4xl font-bold text-yellow-300 hover:text-yellow-200 transition-colors duration-200">
        Interactive Guide to Python
      </a>
      <h1 class="text-2xl md:text-3xl font-semibold text-yellow-400 mt-2">
        Understanding 2D Lists (Lists of Lists)
      </h1>
      <p class="text-xs text-cyan-500 mt-1 italic">
        Working with grid-like structures by using lists that contain other lists as their elements.
      </p>
    </header>

    <nav
      class="max-w-4xl mx-auto mb-6 p-3 bg-blue-800 rounded-lg shadow-md flex justify-between items-center"
    >
      <a href="recursion.html"
        class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded transition-colors duration-200">
        &larr; Previous: Recursion
      </a>
      <a href="dictionaries-tuples.html"
        class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded transition-colors duration-200">
        Next: Dictionaries & Tuples &rarr;
      </a>
    </nav>

    <main class="max-w-4xl mx-auto">
      <section class="mb-8">
        <h2 class="text-2xl font-semibold text-yellow-300 mb-3">
          1. What is a 2D List?
        </h2>
        <p class="mb-4">
          A 2D list, often called a list of lists or a matrix, is simply a list
          where each item is itself another list. This structure is commonly
          used to represent grids, tables, game boards, matrices in mathematics,
          or any data that has rows and columns.
        </p>
        <p class="mb-2">Here's how you can create a 2D list in Python:</p>
        <pre><code class="language-python"># A 3x4 grid (3 rows, 4 columns)
grid = [
  [1, 2, 3, 4],    # Row 0
  [5, 6, 7, 8],    # Row 1
  [9, 10, 11, 12]  # Row 2
]

# You can also create them dynamically, e.g., an empty 2x3 grid
rows = 2
cols = 3
empty_grid = [[0 for _ in range(cols)] for _ in range(rows)]
# empty_grid will be: [[0, 0, 0], [0, 0, 0]]

print(grid)
print(empty_grid)</code></pre>
        <p class="mt-2">
          Each inner list represents a row, and the elements within the inner
          lists represent the columns for that row.
        </p>
      </section>

      <section class="mb-8">
        <h2 class="text-2xl font-semibold text-yellow-300 mb-3">
          2. Creating 2D Lists
        </h2>
        <p class="mb-2">
          You can create a 2D list in Python using various methods. Here are a few examples:
        </p>
        <h3 class="text-lg font-medium text-cyan-400 mt-4 mb-1">
          Creating with List Comprehension (more advanced):
        </h3>
        <pre><code class="language-python">rows = 3
cols = 4
grid = [[0 for _ in range(cols)] for _ in range(rows)]
# grid will be: [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]</code></pre>
      </section>

      <section class="mb-8">
        <h2 class="text-2xl font-semibold text-yellow-300 mb-3">
          3. Accessing Elements in a 2D List
        </h2>
        <p class="mb-2">
          To access a specific element in a 2D list, you need two indices: one
          for the row and one for the column. Remember that indexing starts at
          0.
        </p>
        <p class="mb-2">
          The syntax is: <code>list_name[row_index][column_index]</code>
        </p>
        <pre><code class="language-python">grid = [
  [1, 2, 3, 4],
  [5, 6, 7, 8],
  [9, 10, 11, 12]
]

# Access the element at Row 0, Column 1 (value is 2)
element_0_1 = grid[0][1]
print(f"Element at [0][1]: {element_0_1}")  # Output: 2

# Access the element at Row 2, Column 3 (value is 12)
element_2_3 = grid[2][3]
print(f"Element at [2][3]: {element_2_3}")  # Output: 12

# Access an entire row (Row 1)
row_1 = grid[1]
print(f"Row 1: {row_1}")  # Output: [5, 6, 7, 8]</code></pre>
        <p class="mt-2 text-sm text-red-600">
          Be careful! Accessing an index outside the valid range (e.g.,
          <code>grid[3]</code> or <code>grid[0][4]</code> in the example above)
          will cause an <code>IndexError</code>.
        </p>
      </section>

      <section class="interactive-section mb-8">
        <h2 class="text-2xl font-semibold text-yellow-300 mb-3">
          Interactive: Try Accessing Elements
        </h2>
        <p class="mb-4">
          Enter a row and column index below to see the corresponding element
          highlighted in the example grid. Valid row indices are 0-2, valid
          column indices are 0-3.
        </p>
        <div class="flex flex-wrap items-center mb-4">
          <div>
            <label for="rowIndexInput" class="mr-2 font-medium">Row:</label>
            <input
              type="number"
              id="rowIndexInput"
              class="input-field"
              placeholder="0-2"
              min="0"
              max="2"
            />
          </div>
          <div>
            <label for="colIndexInput" class="mr-2 font-medium">Column:</label>
            <input
              type="number"
              id="colIndexInput"
              class="input-field"
              placeholder="0-3"
              min="0"
              max="3"
            />
          </div>
          <button id="accessElementButton" class="btn">Access Element</button>
        </div>

        <div class="flex flex-wrap items-start">
          <div class="mr-6 mb-4">
            <h3 class="text-lg font-medium mb-2">Example Grid:</h3>
            <div id="gridVisualizer" class="grid-container"></div>
          </div>
          <div>
            <h3 class="text-lg font-medium mb-2">Result:</h3>
            <div id="accessResultDisplay" class="output-display min-h-[40px]">
              <span class="text-gray-500 italic"
                >Enter indices and click 'Access Element'.</span
              >
            </div>
          </div>
        </div>
        <div id="accessMessage" class="message-box" style="display: none"></div>
        <button id="accessClearButton" class="btn">Clear Output</button>
      </section>

      <section class="mb-8">
        <h2 class="text-2xl font-semibold text-yellow-300 mb-3">
          4. Iterating Through 2D Lists
        </h2>
        <p class="mb-2">
          The most common way to process every element in a 2D list is using
          nested loops. The outer loop iterates through the rows, and the inner
          loop iterates through the elements (columns) within the current row.
        </p>
        <h3 class="text-lg font-medium text-cyan-400 mt-4 mb-1">Iterating with nested loops to get individual elements:</h3>
        <pre><code class="language-python">grid = [
  [1, 2, 3],
  [4, 5, 6]
]

print("Iterating by element:")
for row_index in range(len(grid)): # Outer loop iterates through row indices (0, 1)
  for col_index in range(len(grid[row_index])): # Inner loop iterates through col indices (0, 1, 2)
    element = grid[row_index][col_index]
    print(f"  Processing element at [{row_index}][{col_index}]: {element}")

print("\nAlternative: Iterating directly through rows and elements:")
for row in grid: # Outer loop gets each inner list (row)
    print(f"Processing Row: {row}")
    for element in row: # Inner loop gets each element in the current row
        print(f"  Element: {element}")</code></pre>
      </section>

      <section class="interactive-section mb-8">
        <h2 class="text-2xl font-semibold text-yellow-300 mb-3">
          Interactive: Visualize Iteration
        </h2>
        <p class="mb-4">
          Click the button to visualize nested loops iterating through the
          example grid. Observe how it processes row by row, then element by
          element within each row.
        </p>
        <div class="mb-4">
          <button id="runIterationButton" class="btn btn-green">
            Run Iteration
          </button>
          <button id="resetIterationButton" class="btn">Reset</button>
        </div>

        <div class="flex flex-wrap items-start">
          <div class="mr-6 mb-4">
            <h3 class="text-lg font-medium mb-2">Example Grid:</h3>
            <div id="gridVisualizerIter" class="grid-container"></div>
          </div>
          <div>
            <h3 class="text-lg font-medium mb-2">Iteration Log:</h3>
            <div id="iterationLogDisplay" class="output-display min-h-[150px]">
              <span class="text-gray-500 italic"
                >Click "Run Iteration" to start.</span
              >
            </div>
          </div>
        </div>
        <div
          id="iterationMessage"
          class="message-box"
          style="display: none"
        ></div>
        <button id="iterateClearButton" class="btn">Clear</button>
      </section>

      <section class="mb-8">
        <h2 class="text-2xl font-semibold text-yellow-300 mb-3">
          5. Modifying Elements
        </h2>
        <p class="mb-2">
          You can modify elements in a 2D list by accessing them and assigning new values.
        </p>
        <pre><code class="language-python">grid = [
  [1, 2, 3],
  [4, 5, 6]
]

# Modify the element at Row 1, Column 2 (value is 6) to 10
grid[1][2] = 10
print(grid) # Output: [[1, 2, 3], [4, 5, 10]]</code></pre>
      </section>

      <section class="mb-8">
        <h2 class="text-2xl font-semibold text-yellow-300 mb-3">
          6. Common Operations with 2D Lists
        </h2>
        
        <h3 class="text-lg font-medium text-cyan-400 mb-1">Finding the number of rows:</h3>
        <pre><code class="language-python">grid = [[1,2], [3,4]]
num_rows = len(grid)
print(f"Number of rows: {num_rows}") # Output: 2</code></pre>

        <h3 class="text-lg font-medium text-cyan-400 mt-4 mb-1">Finding the number of columns (assuming a rectangular grid):</h3>
        <pre><code class="language-python">grid = [[1,2,3], [4,5,6]]
if grid: # Check if grid is not empty
  num_cols = len(grid[0])
  print(f"Number of columns: {num_cols}") # Output: 3</code></pre>

        <h3 class="text-lg font-medium text-cyan-400 mt-4 mb-1">Adding a new row:</h3>
        <pre><code class="language-python">grid = [[1,2], [3,4]]
grid.append([5,6])
print(grid) # Output: [[1, 2], [3, 4], [5, 6]]</code></pre>

        <h3 class="text-lg font-medium text-cyan-400 mt-4 mb-1">Adding a new column (more complex, often requires rebuilding):</h3>
        <p class="mb-2">
          Adding a new "column" usually means adding an element to each existing row at the same position, or appending to each row.
        </p>
      </section>

      <section class="mb-8">
        <h2 class="text-2xl font-semibold text-yellow-300 mb-3">
          7. Use Cases for 2D Lists
        </h2>
        <ul class="list-disc list-inside ml-4 space-y-1">
          <li>
            <p class="font-medium mb-1">
              Representing grids, tables, and game boards
            </p>
          </li>
          <li>
            <p class="font-medium mb-1">
              Storing and processing tabular data
            </p>
          </li>
          <li>
            <p class="font-medium mb-1">
              Implementing algorithms that involve 2D data
            </p>
          </li>
          <li>
            <p class="font-medium mb-1">
              Storing and processing matrices in mathematics
            </p>
          </li>
        </ul>
      </section>
    </main>

    <footer class="text-center mt-12 py-6 border-t border-yellow-500">
      <p class="text-sm text-cyan-300">Happy Coding!</p>
      <p class="mt-2">
        <a
          href="../index.html"
          class="text-yellow-400 hover:text-yellow-200 font-medium transition-colors duration-200"
          >Back to Main Menu</a
        >
      </p>
    </footer>

    <script src="../js/main.js" defer></script>
    <script>
      // showMessage is now in js/main.js

      // --- Example 2D List Data ---
      const exampleGridData = [
        [1, 2, 3, 4],
        [5, 6, 7, 8],
        [9, 10, 11, 12],
      ];
      const numRows = exampleGridData.length;
      const numCols = exampleGridData[0].length; // Assumes a rectangular grid

      // --- DOM Elements ---
      const rowIndexInput = document.getElementById("rowIndexInput");
      const colIndexInput = document.getElementById("colIndexInput");
      const accessElementButton = document.getElementById(
        "accessElementButton"
      );
      const gridVisualizer = document.getElementById("gridVisualizer");
      const accessResultDisplay = document.getElementById(
        "accessResultDisplay"
      );
      const accessMessage = document.getElementById("accessMessage");

      const runIterationButton = document.getElementById("runIterationButton");
      const resetIterationButton = document.getElementById(
        "resetIterationButton"
      );
      const gridVisualizerIter = document.getElementById("gridVisualizerIter");
      const iterationLogDisplay = document.getElementById(
        "iterationLogDisplay"
      );
      const iterationMessage = document.getElementById("iterationMessage");

      const checkQuizButton2DList = document.getElementById(
        "checkQuizButton2DList"
      );
      const quizResult2DList = document.getElementById("quizResult2DList");

      // --- Grid Rendering Function ---
      function renderGrid(containerElement, gridData) {
        containerElement.innerHTML = ""; // Clear previous grid
        gridData.forEach((rowData, rIndex) => {
          const rowDiv = document.createElement("div");
          rowDiv.className = "grid-row";
          rowDiv.dataset.rowIndex = rIndex;
          rowData.forEach((cellData, cIndex) => {
            const cellDiv = document.createElement("div");
            cellDiv.className = "grid-cell";
            cellDiv.textContent = cellData;
            cellDiv.dataset.rowIndex = rIndex;
            cellDiv.dataset.colIndex = cIndex;
            rowDiv.appendChild(cellDiv);
          });
          containerElement.appendChild(rowDiv);
        });
      }

      // --- Interactive Element Access Logic ---
      function clearHighlights(containerElement) {
        containerElement
          .querySelectorAll(".grid-cell.highlight")
          .forEach((cell) => {
            cell.classList.remove("highlight");
          });
      }

      function handleAccessElement() {
        clearHighlights(gridVisualizer); // Clear previous highlight
        const rStr = rowIndexInput.value;
        const cStr = colIndexInput.value;

        if (rStr === "" || cStr === "") {
          showMessage(
            accessMessage,
            "Please enter both row and column indices.",
            "error"
          );
          accessResultDisplay.innerHTML =
            "<span class=\"text-gray-500 italic\">Enter indices and click 'Access Element'.</span>";
          return;
        }

        const r = parseInt(rStr, 10);
        const c = parseInt(cStr, 10);

        // Validate indices
        if (
          isNaN(r) ||
          isNaN(c) ||
          r < 0 ||
          r >= numRows ||
          c < 0 ||
          c >= numCols
        ) {
          showMessage(
            accessMessage,
            `Invalid indices. Row must be 0-${numRows - 1}, Column must be 0-${
              numCols - 1
            }.`,
            "error"
          );
          accessResultDisplay.innerHTML =
            '<span class="text-red-500">Error: Index out of bounds.</span>';
          return;
        }

        // Highlight the cell
        const targetCell = gridVisualizer.querySelector(
          `.grid-cell[data-row-index="${r}"][data-col-index="${c}"]`
        );
        if (targetCell) {
          targetCell.classList.add("highlight");
          const value = exampleGridData[r][c];
          accessResultDisplay.textContent = `Value at grid[${r}][${c}]: ${value}`;
          showMessage(
            accessMessage,
            `Element at [${r}][${c}] highlighted.`,
            "success"
          );
        } else {
          // Should not happen if validation is correct, but good fallback
          showMessage(
            accessMessage,
            "Could not find the specified cell.",
            "error"
          );
          accessResultDisplay.innerHTML =
            '<span class="text-red-500">Error: Cell not found.</span>';
        }
      }

      // --- Iteration Visualization Logic ---
      let iterationInterval = null;
      let iterRow = 0;
      let iterCol = 0;
      let iterationRunning = false;

      function clearIterationHighlights() {
        gridVisualizerIter.querySelectorAll(".grid-cell").forEach((cell) => {
          cell.classList.remove("highlight-row", "highlight-processing");
        });
      }

      function resetIteration() {
        if (iterationInterval) {
          clearInterval(iterationInterval);
          iterationInterval = null;
        }
        iterationRunning = false;
        iterRow = 0;
        iterCol = 0;
        clearIterationHighlights();
        iterationLogDisplay.innerHTML =
          '<span class="text-gray-500 italic">Click "Run Iteration" to start.</span>';
        runIterationButton.disabled = false;
        showMessage(iterationMessage, "Iteration reset.", "info");
      }

      function stepThroughIteration() {
        if (!iterationRunning) return;
        clearIterationHighlights(); // Clear previous step's highlights

        if (iterRow < numRows) {
          // Highlight the current row being processed
          gridVisualizerIter
            .querySelectorAll(`.grid-cell[data-row-index="${iterRow}"]`)
            .forEach((cell) => {
              cell.classList.add("highlight-row");
            });

          if (iterCol < numCols) {
            // Highlight the specific cell being processed
            const currentCell = gridVisualizerIter.querySelector(
              `.grid-cell[data-row-index="${iterRow}"][data-col-index="${iterCol}"]`
            );
            if (currentCell) {
              currentCell.classList.add("highlight-processing");
            }

            // Log the action
            const value = exampleGridData[iterRow][iterCol];
            iterationLogDisplay.innerHTML += `Processing grid[${iterRow}][${iterCol}]: ${value}\n`;
            iterationLogDisplay.scrollTop = iterationLogDisplay.scrollHeight; // Auto-scroll

            // Move to the next column for the next step
            iterCol++;
          } else {
            // Finished columns for this row, move to the next row
            iterationLogDisplay.innerHTML += `Finished Row ${iterRow}.\n`;
            iterationLogDisplay.scrollTop = iterationLogDisplay.scrollHeight;
            iterRow++;
            iterCol = 0; // Reset column index for the new row
          }
        } else {
          // Finished all rows
          iterationLogDisplay.innerHTML += `<strong class="text-green-600">Iteration Complete!</strong>\n`;
          iterationLogDisplay.scrollTop = iterationLogDisplay.scrollHeight;
          clearInterval(iterationInterval);
          iterationInterval = null;
          iterationRunning = false;
          runIterationButton.disabled = false;
          showMessage(iterationMessage, "Iteration finished.", "success");
        }
      }

      function startIteration() {
        if (iterationRunning) return;
        resetIteration(); // Ensure clean state
        iterationRunning = true;
        runIterationButton.disabled = true;
        iterationLogDisplay.innerHTML = "Starting iteration...\n";
        iterationInterval = setInterval(stepThroughIteration, 700); // Delay between steps
      }

      // --- Quiz Logic ---
      function check2DListQuiz() {
        const answers = {
          q1_2dlist: "c", // my_list[1][0] is 3
          q2_2dlist: "b", // len(data) gives the number of inner lists (rows)
          q3_2dlist: "c", // Nested loops
        };
        let score = 0;
        let resultsHTML = "<ul>";
        let allAnswered = true;

        for (const q in answers) {
          const selected = document.querySelector(`input[name="${q}"]:checked`);
          if (!selected) {
            allAnswered = false;
            break;
          }
          const isCorrect = selected.value === answers[q];
          if (isCorrect) {
            score++;
            resultsHTML += `<li class="text-green-700">✓ Question ${q.substring(
              1,
              2
            )}: Correct!</li>`;
          } else {
            resultsHTML += `<li class="text-red-700">✗ Question ${q.substring(
              1,
              2
            )}: Incorrect.</li>`;
          }
        }

        if (!allAnswered) {
          quizResult2DList.textContent =
            "Please answer all questions before checking.";
          quizResult2DList.className = "message-box message-box-error";
          quizResult2DList.style.display = "block";
          return;
        }

        resultsHTML += "</ul>";
        resultsHTML =
          `<p class="font-medium mb-2">You scored ${score} out of ${
            Object.keys(answers).length
          }.</p>` + resultsHTML;

        quizResult2DList.innerHTML = resultsHTML;
        quizResult2DList.className =
          score === Object.keys(answers).length
            ? "message-box message-box-success"
            : "message-box message-box-error";
        quizResult2DList.style.display = "block";
      }

      // --- Event Listeners ---
      accessElementButton.addEventListener("click", handleAccessElement);
      // Optional: Add Enter key listener for index inputs
      rowIndexInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") handleAccessElement();
      });
      colIndexInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") handleAccessElement();
      });

      runIterationButton.addEventListener("click", startIteration);
      resetIterationButton.addEventListener("click", resetIteration);

      checkQuizButton2DList.addEventListener("click", check2DListQuiz);

      // --- Initial Setup ---
      renderGrid(gridVisualizer, exampleGridData); // Render the access grid
      renderGrid(gridVisualizerIter, exampleGridData); // Render the iteration grid
      resetIteration(); // Set initial state for iteration visualizer
    </script>
  </body>
</html>
