<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Learn Dictionaries & Tuples</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/shared-styles.css">
  </head>
  <body class="bg-blue-700 text-gray-300 p-4 md:p-8">
    <header class="text-center mb-8">
      <a href="../index.html" class="text-3xl md:text-4xl font-bold text-yellow-300 hover:text-yellow-200 transition-colors duration-200">
        Interactive Guide to Python
      </a>
      <h1 class="text-2xl md:text-3xl font-semibold text-yellow-400 mt-2">
        Understanding Dictionaries & Tuples
      </h1>
      <p class="text-xs text-cyan-500 mt-1 italic">
        Storing key-value pairs with dictionaries and ordered, immutable sequences with tuples.
      </p>
    </header>

    <nav
      class="max-w-4xl mx-auto mb-6 p-3 bg-blue-800 rounded-lg shadow-md flex justify-between items-center"
    >
      <a href="2d-lists.html"
        class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded transition-colors duration-200">
        &larr; Previous: 2D Lists
      </a>
      <a href="data-structures.html"
        class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded transition-colors duration-200">
        Next: Data Structures Overview &rarr;
      </a>
    </nav>

    <main class="max-w-4xl mx-auto">
      <section class="mb-8">
        <h2 class="text-2xl font-semibold text-yellow-300 mb-3">
          1. Dictionaries (<code>dict</code>): Key-Value Stores
        </h2>
        <p class="mb-4">
          A dictionary is a collection of <strong>key-value pairs</strong>. Each
          key must be unique and is used to look up its corresponding value.
          Think of it like a real-world dictionary where the word (key) maps to
          its definition (value), or like a contact list where a name (key) maps
          to a phone number (value).
        </p>
        <p class="mb-2">Key characteristics:</p>
        <ul class="list-disc list-inside ml-4 space-y-1">
          <li>
            <strong>Key-Value Pairs:</strong> Data is stored as
            <code>key: value</code>.
          </li>
          <li>
            <strong>Mutable:</strong> You can add, remove, or change key-value
            pairs after creation.
          </li>
          <li>
            <strong>Unordered (Historically):</strong> Before Python 3.7,
            dictionaries didn't maintain insertion order. From Python 3.7
            onwards, they remember the order in which items were inserted.
          </li>
          <li>
            <strong>Unique Keys:</strong> Keys within a dictionary must be
            unique. Values can be duplicated.
          </li>
          <li>
            <strong>Keys must be immutable types:</strong> Keys are typically
            strings, numbers, or tuples (containing only immutable types). Lists
            cannot be keys.
          </li>
        </ul>
        <h3 class="text-lg font-medium text-gray-300 mb-1 mt-3">
          Creating Dictionaries:
        </h3>
        <pre><code class="language-python"># Creating an empty dictionary
empty_dict = {}

# Creating a dictionary with initial items
student = {
  "name": "Alice",
  "major": "Computer Science",
  "gpa": 3.8,
  "courses": ["CS101", "Math200"] # Values can be any type, including lists
}
print(student)
print(type(student)) # Output: <class 'dict'></code></pre>
        <h3 class="text-lg font-medium text-gray-300 mb-1 mt-3">
          Accessing Values:
        </h3>
        <p class="mb-2">
          You access values using their corresponding key inside square brackets
          <code>[]</code>.
        </p>
        <pre><code class="language-python">print(student["name"])  # Output: Alice
print(student["gpa"])   # Output: 3.8

# Accessing a non-existent key raises a KeyError
# print(student["age"]) # This would cause an error

# Safer access using .get(key, default_value)
age = student.get("age", "N/A") # Returns 'N/A' if 'age' key doesn't exist
print(f"Age: {age}") # Output: Age: N/A</code></pre>
        <h3 class="text-lg font-medium text-gray-300 mb-1 mt-3">
          Adding/Updating Items:
        </h3>
        <pre><code class="language-python"># Add a new key-value pair
student["year"] = 3
print(student) # 'year': 3 is added

# Update an existing value
student["gpa"] = 3.9
print(student) # 'gpa' value is updated</code></pre>
        <h3 class="text-lg font-medium text-gray-300 mb-1 mt-3">Iterating:</h3>
        <pre><code class="language-python"># Iterate through keys (default)
print("\nKeys:")
for key in student:
  print(key)

# Iterate through values
print("\nValues:")
for value in student.values():
  print(value)

# Iterate through key-value pairs (items)
print("\nItems:")
for key, value in student.items():
  print(f"  {key}: {value}")</code></pre>
      </section>

      <section class="interactive-section mb-8">
        <h2 class="text-2xl font-semibold text-yellow-300 mb-3">
          Interactive Dictionary Operations
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <div>
            <h3 class="text-lg font-medium mb-2">Current Dictionary:</h3>
            <div id="dictDisplay" class="output-display">{ }</div>
          </div>
          <div>
            <h3 class="text-lg font-medium mb-2">Operation Result:</h3>
            <div id="dictResultDisplay" class="output-display">
              <span class="text-gray-500 italic">Perform an operation.</span>
            </div>
          </div>
        </div>
        <div id="dictMessage" class="message-box" style="display: none"></div>
      </section>

      <section class="mb-8">
        <h2 class="text-2xl font-semibold text-yellow-300 mb-3">
          2. Tuples (<code>tuple</code>): Immutable Sequences
        </h2>
        <p class="mb-4">
          A tuple is an <strong>ordered, immutable sequence</strong> of items.
          Think of it like a list, but once you create it, you cannot change its
          contents (add, remove, or modify elements). Tuples are typically used
          to store collections of related items where the order and content
          should not change, like coordinates (x, y) or RGB color values (red,
          green, blue).
        </p>
        <p class="mb-2">Key characteristics:</p>
        <ul class="list-disc list-inside ml-4 space-y-1">
          <li><strong>Ordered:</strong> Items maintain their position.</li>
          <li><strong>Immutable:</strong> Cannot be changed after creation.</li>
          <li>
            <strong>Allows Duplicates:</strong> Can contain the same item
            multiple times.
          </li>
          <li>
            <strong>Heterogeneous:</strong> Can contain items of different data
            types.
          </li>
        </ul>
        <h3 class="text-lg font-medium text-gray-300 mb-1 mt-3">
          Creating Tuples:
        </h3>
        <p class="mb-2">
          Tuples are created using parentheses <code>()</code>, with items
          separated by commas.
        </p>
        <pre><code class="language-python"># Creating an empty tuple
empty_tuple = ()

# Creating a tuple with items
point = (10, 20) # A 2D point
colors = ("red", "green", "blue")
mixed = (1, "hello", 3.14)

# Single item tuple needs a trailing comma!
single_item_tuple = (99,) # Without the comma, it's just the number 99
not_a_tuple = (99)

print(point)
print(type(point)) # Output: <class 'tuple'>
print(type(single_item_tuple)) # Output: <class 'tuple'>
print(type(not_a_tuple)) # Output: <class 'int'></code></pre>
        <h3 class="text-lg font-medium text-gray-300 mb-1 mt-3">
          Accessing Elements:
        </h3>
        <p class="mb-2">
          You access tuple elements using indexing <code>[index]</code>, just
          like lists (starting from 0).
        </p>
        <pre><code class="language-python">colors = ("red", "green", "blue")
print(colors[0]) # Output: red
print(colors[-1]) # Output: blue

# Slicing also works
print(colors[0:2]) # Output: ('red', 'green')</code></pre>
        <h3 class="text-lg font-medium text-gray-300 mb-1 mt-3">
          Immutability:
        </h3>
        <p class="mb-2">
          Trying to change an element will result in a <code>TypeError</code>.
        </p>
        <pre><code class="language-python"># colors[0] = "yellow" # This would raise a TypeError</code></pre>
        <h3 class="text-lg font-medium text-gray-300 mb-1 mt-3">
          Packing and Unpacking:
        </h3>
        <p class="mb-2">
          You can easily assign tuple elements to individual variables
          (unpacking).
        </p>
        <pre><code class="language-python">point = (10, 20)
x, y = point # Unpacking

print(f"x coordinate: {x}") # Output: 10
print(f"y coordinate: {y}") # Output: 20</code></pre>
      </section>

      <section class="interactive-section mb-8">
        <h2 class="text-2xl font-semibold text-yellow-300 mb-3">
          Interactive Tuple Operations
        </h2>
        <div class="mb-4">
          <h3 class="text-lg font-medium mb-2">Sample Tuple:</h3>
          <div
            id="tupleVisualizer"
            class="sequence-container tuple-container mb-4"
          ></div>
        </div>
        <div class="flex flex-wrap items-center mb-2">
          <label for="tupleIndexInput" class="mr-2">Index to Access:</label>
          <input
            type="number"
            id="tupleIndexInput"
            class="input-field input-field-small"
            placeholder="e.g., 0, -1"
          />
          <button id="accessTupleButton" class="btn btn-green">
            Access Element
          </button>
        </div>
        <h4 class="text-md font-medium mt-3 mb-1">Result:</h4>
        <div id="tupleResultDisplay" class="output-display">
          <span class="text-gray-500 italic"
            >Enter an index and click 'Access Element'.</span
          >
        </div>
        <div id="tupleMessage" class="message-box" style="display: none"></div>
      </section>

      <section class="mb-8 interactive-section">
        <h2 class="text-2xl font-semibold text-yellow-300 mb-3">5. Quick Quiz</h2>
        <p class="mb-4">Test your understanding!</p>
        <div class="mb-3">
          <p class="font-medium mb-1">
            Q1: How do you access the value associated with the key
            <code>"city"</code> in a dictionary called <code>address</code>?
          </p>
          <label class="block"
            ><input type="radio" name="q1_dictuple" value="a" class="mr-1" />
            <code>address("city")</code></label
          >
          <label class="block"
            ><input type="radio" name="q1_dictuple" value="b" class="mr-1" />
            <code>address.city</code></label
          >
          <label class="block"
            ><input type="radio" name="q1_dictuple" value="c" class="mr-1" />
            <code>address["city"]</code></label
          >
        </div>
        <div class="mb-3">
          <p class="font-medium mb-1">
            Q2: Which of the following data types is immutable?
          </p>
          <label class="block"
            ><input type="radio" name="q2_dictuple" value="a" class="mr-1" />
            List</label
          >
          <label class="block"
            ><input type="radio" name="q2_dictuple" value="b" class="mr-1" />
            Dictionary</label
          >
          <label class="block"
            ><input type="radio" name="q2_dictuple" value="c" class="mr-1" />
            Tuple</label
          >
        </div>
        <div class="mb-3">
          <p class="font-medium mb-1">
            Q3: How do you create a tuple containing only the number 5?
          </p>
          <label class="block"
            ><input type="radio" name="q3_dictuple" value="a" class="mr-1" />
            <code>(5)</code></label
          >
          <label class="block"
            ><input type="radio" name="q3_dictuple" value="b" class="mr-1" />
            <code>[5,]</code></label
          >
          <label class="block"
            ><input type="radio" name="q3_dictuple" value="c" class="mr-1" />
            <code>(5,)</code></label
          >
        </div>
        <div class="mb-3">
          <p class="font-medium mb-1">
            Q4: Can a list be used as a key in a Python dictionary?
          </p>
          <label class="block"
            ><input type="radio" name="q4_dictuple" value="a" class="mr-1" />
            Yes</label
          >
          <label class="block"
            ><input type="radio" name="q4_dictuple" value="b" class="mr-1" />
            No</label
          >
        </div>
        <button id="checkQuizButtonDicTuple" class="btn">Check Answers</button>
        <div
          id="quizResultDicTuple"
          class="message-box mt-4"
          style="display: none"
        ></div>
      </section>
    </main>

    <footer class="text-center mt-12 py-6 border-t border-yellow-500">
      <p class="text-sm text-cyan-300">Happy Coding!</p>
      <p class="mt-2">
        <a
          href="../index.html"
          class="text-yellow-400 hover:text-yellow-200 font-medium transition-colors duration-200"
          >Back to Main Menu</a
        >
      </p>
    </footer>

    <script src="../js/main.js" defer></script>
    <script>
      // showMessage is now in js/main.js

      // --- DOM Elements ---
      const dictKeyInput = document.getElementById("dictKeyInput");
      const dictValueInput = document.getElementById("dictValueInput");
      const addUpdateButton = document.getElementById("addUpdateButton");
      const accessKeyInput = document.getElementById("accessKeyInput");
      const accessValueButton = document.getElementById("accessValueButton");
      const removeKeyButton = document.getElementById("removeKeyButton");
      const dictDisplay = document.getElementById("dictDisplay");
      const dictResultDisplay = document.getElementById("dictResultDisplay");
      const dictMessage = document.getElementById("dictMessage");

      const tupleVisualizer = document.getElementById("tupleVisualizer");
      const tupleIndexInput = document.getElementById("tupleIndexInput");
      const accessTupleButton = document.getElementById("accessTupleButton");
      const tupleResultDisplay = document.getElementById("tupleResultDisplay");
      const tupleMessage = document.getElementById("tupleMessage");

      const checkQuizButtonDicTuple = document.getElementById(
        "checkQuizButtonDicTuple"
      );
      const quizResultDicTuple = document.getElementById("quizResultDicTuple");

      // --- State ---
      let interactiveDict = {
        name: "Example",
        type: "Dictionary",
        items: 2,
      };
      const sampleTuple = ("apple", 100, True, 3.14, "banana"); // JS doesn't have tuples, simulate with array

      // --- Dictionary Logic ---
      function renderDictionary() {
        dictDisplay.innerHTML = ""; // Clear previous
        let content = "{\n";
        const keys = Object.keys(interactiveDict);
        if (keys.length === 0) {
          content = "{ }"; // Empty dictionary
        } else {
          keys.forEach((key, index) => {
            const value = interactiveDict[key];
            // Basic type formatting for display
            let valueStr = typeof value === "string" ? `"${value}"` : value;
            if (typeof value === "boolean")
              valueStr =
                value.toString().charAt(0).toUpperCase() +
                value.toString().slice(1);

            content += `  <span class="dict-entry"><span class="dict-key">"${key}"</span>: <span class="dict-value">${valueStr}</span></span>`;
            if (index < keys.length - 1) {
              content += ",\n";
            } else {
              content += "\n";
            }
          });
          content += "}";
        }
        dictDisplay.innerHTML = content;
      }

      addUpdateButton.addEventListener("click", () => {
        const key = dictKeyInput.value.trim();
        const value = dictValueInput.value; // Keep value as string for simplicity, could parse later

        if (!key) {
          showMessage(dictMessage, "Please enter a key.", "error");
          return;
        }
        const keyExists = interactiveDict.hasOwnProperty(key);
        interactiveDict[key] = value; // Add or update
        renderDictionary();
        dictKeyInput.value = "";
        dictValueInput.value = "";
        dictResultDisplay.textContent = `Item "${key}": "${value}" ${
          keyExists ? "updated" : "added"
        }.`;
        showMessage(
          dictMessage,
          `Item ${keyExists ? "updated" : "added"}.`,
          "success"
        );
      });

      accessValueButton.addEventListener("click", () => {
        const key = accessKeyInput.value.trim();
        if (!key) {
          showMessage(dictMessage, "Please enter a key to access.", "error");
          return;
        }

        renderDictionary(); // Re-render to clear previous highlights

        if (interactiveDict.hasOwnProperty(key)) {
          const value = interactiveDict[key];
          let valueStr = typeof value === "string" ? `"${value}"` : value;
          if (typeof value === "boolean")
            valueStr =
              value.toString().charAt(0).toUpperCase() +
              value.toString().slice(1);
          dictResultDisplay.textContent = `Value for key "${key}": ${valueStr}`;
          // Highlight the accessed value
          const valueElements = dictDisplay.querySelectorAll(".dict-value");
          const keyElements = dictDisplay.querySelectorAll(".dict-key");
          for (let i = 0; i < keyElements.length; i++) {
            if (keyElements[i].textContent === `"${key}"`) {
              valueElements[i].classList.add("highlight");
              break;
            }
          }
          showMessage(dictMessage, "Value accessed.", "success");
        } else {
          dictResultDisplay.textContent = `Error: Key "${key}" not found.`;
          showMessage(dictMessage, `Key "${key}" not found.`, "error");
        }
      });

      removeKeyButton.addEventListener("click", () => {
        const key = accessKeyInput.value.trim();
        if (!key) {
          showMessage(dictMessage, "Please enter a key to remove.", "error");
          return;
        }
        if (interactiveDict.hasOwnProperty(key)) {
          delete interactiveDict[key];
          renderDictionary();
          dictResultDisplay.textContent = `Key "${key}" removed.`;
          showMessage(dictMessage, `Key "${key}" removed.`, "success");
          accessKeyInput.value = ""; // Clear input after removal
        } else {
          renderDictionary(); // Clear highlights even if key not found
          dictResultDisplay.textContent = `Error: Key "${key}" not found.`;
          showMessage(dictMessage, `Key "${key}" not found.`, "error");
        }
      });

      // --- Tuple Logic ---
      function renderTuple() {
        tupleVisualizer.innerHTML = ""; // Clear previous
        sampleTuple.forEach((item, index) => {
          const span = document.createElement("span");
          span.className = "sequence-item";
          // Basic type formatting
          let itemStr = typeof item === "string" ? `"${item}"` : item;
          if (typeof item === "boolean")
            itemStr =
              item.toString().charAt(0).toUpperCase() +
              item.toString().slice(1);
          span.textContent = itemStr;
          span.dataset.index = index;
          tupleVisualizer.appendChild(span);
        });
      }

      function clearTupleHighlights() {
        tupleVisualizer
          .querySelectorAll(".sequence-item.highlight")
          .forEach((span) => {
            span.classList.remove("highlight");
          });
      }

      accessTupleButton.addEventListener("click", () => {
        clearTupleHighlights();
        const indexStr = tupleIndexInput.value;
        if (indexStr === "") {
          showMessage(tupleMessage, "Please enter an index.", "error");
          tupleResultDisplay.textContent =
            "<span class=\"text-gray-500 italic\">Enter an index and click 'Access Element'.</span>";
          return;
        }
        const index = parseInt(indexStr, 10);

        if (
          isNaN(index) ||
          index < -sampleTuple.length ||
          index >= sampleTuple.length
        ) {
          showMessage(
            tupleMessage,
            `Invalid index. Must be between -${sampleTuple.length} and ${
              sampleTuple.length - 1
            }.`,
            "error"
          );
          tupleResultDisplay.textContent =
            '<span class="text-red-500">Error: Index out of bounds.</span>';
          return;
        }

        const actualIndex = index < 0 ? sampleTuple.length + index : index;
        const element = sampleTuple[actualIndex];
        let elementStr = typeof element === "string" ? `"${element}"` : element;
        if (typeof element === "boolean")
          elementStr =
            element.toString().charAt(0).toUpperCase() +
            element.toString().slice(1);

        tupleResultDisplay.textContent = `Element at index ${index}: ${elementStr}`;
        // Highlight
        const targetSpan = tupleVisualizer.querySelector(
          `.sequence-item[data-index="${actualIndex}"]`
        );
        if (targetSpan) targetSpan.classList.add("highlight");
        showMessage(tupleMessage, "Element accessed.", "success");
      });

      // --- Quiz Logic ---
      function checkDicTupleQuiz() {
        const answers = {
          q1_dictuple: "c", // address["city"]
          q2_dictuple: "c", // Tuple
          q3_dictuple: "c", // (5,)
          q4_dictuple: "b", // No (lists are mutable)
        };
        let score = 0;
        let resultsHTML = "<ul>";
        let allAnswered = true;

        for (const q in answers) {
          const selected = document.querySelector(`input[name="${q}"]:checked`);
          if (!selected) {
            allAnswered = false;
            break;
          }
          const isCorrect = selected.value === answers[q];
          if (isCorrect) {
            score++;
            resultsHTML += `<li class="text-green-700">✓ Question ${q.substring(
              1,
              2
            )}: Correct!</li>`;
          } else {
            resultsHTML += `<li class="text-red-700">✗ Question ${q.substring(
              1,
              2
            )}: Incorrect.</li>`;
          }
        }

        if (!allAnswered) {
          quizResultDicTuple.textContent =
            "Please answer all questions before checking.";
          quizResultDicTuple.className = "message-box message-box-error";
          quizResultDicTuple.style.display = "block";
          return;
        }

        resultsHTML += "</ul>";
        resultsHTML =
          `<p class="font-medium mb-2">You scored ${score} out of ${
            Object.keys(answers).length
          }.</p>` + resultsHTML;

        quizResultDicTuple.innerHTML = resultsHTML;
        quizResultDicTuple.className =
          score === Object.keys(answers).length
            ? "message-box message-box-success"
            : "message-box message-box-error";
        quizResultDicTuple.style.display = "block";
      }

      // --- Event Listeners ---
      checkQuizButtonDicTuple.addEventListener("click", checkDicTupleQuiz);

      // --- Initial Setup ---
      window.onload = () => {
        renderDictionary();
        renderTuple();
      };
    </script>
  </body>
</html>
